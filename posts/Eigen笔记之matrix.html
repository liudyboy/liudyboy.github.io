<!DOCTYPE html>
<html>
<head>
<title>Eigen笔记之matrix.md</title>
<meta http-equiv="Content-type" content="text/html;charset=UTF-8">

<style>
/* https://github.com/microsoft/vscode/blob/master/extensions/markdown-language-features/media/markdown.css */
/*---------------------------------------------------------------------------------------------
 *  Copyright (c) Microsoft Corporation. All rights reserved.
 *  Licensed under the MIT License. See License.txt in the project root for license information.
 *--------------------------------------------------------------------------------------------*/

body {
	font-family: var(--vscode-markdown-font-family, -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif);
	font-size: var(--vscode-markdown-font-size, 14px);
	padding: 0 26px;
	line-height: var(--vscode-markdown-line-height, 22px);
	word-wrap: break-word;
}

#code-csp-warning {
	position: fixed;
	top: 0;
	right: 0;
	color: white;
	margin: 16px;
	text-align: center;
	font-size: 12px;
	font-family: sans-serif;
	background-color:#444444;
	cursor: pointer;
	padding: 6px;
	box-shadow: 1px 1px 1px rgba(0,0,0,.25);
}

#code-csp-warning:hover {
	text-decoration: none;
	background-color:#007acc;
	box-shadow: 2px 2px 2px rgba(0,0,0,.25);
}

body.scrollBeyondLastLine {
	margin-bottom: calc(100vh - 22px);
}

body.showEditorSelection .code-line {
	position: relative;
}

body.showEditorSelection .code-active-line:before,
body.showEditorSelection .code-line:hover:before {
	content: "";
	display: block;
	position: absolute;
	top: 0;
	left: -12px;
	height: 100%;
}

body.showEditorSelection li.code-active-line:before,
body.showEditorSelection li.code-line:hover:before {
	left: -30px;
}

.vscode-light.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(0, 0, 0, 0.15);
}

.vscode-light.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(0, 0, 0, 0.40);
}

.vscode-light.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-dark.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 255, 255, 0.4);
}

.vscode-dark.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 255, 255, 0.60);
}

.vscode-dark.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

.vscode-high-contrast.showEditorSelection .code-active-line:before {
	border-left: 3px solid rgba(255, 160, 0, 0.7);
}

.vscode-high-contrast.showEditorSelection .code-line:hover:before {
	border-left: 3px solid rgba(255, 160, 0, 1);
}

.vscode-high-contrast.showEditorSelection .code-line .code-line:hover:before {
	border-left: none;
}

img {
	max-width: 100%;
	max-height: 100%;
}

a {
	text-decoration: none;
}

a:hover {
	text-decoration: underline;
}

a:focus,
input:focus,
select:focus,
textarea:focus {
	outline: 1px solid -webkit-focus-ring-color;
	outline-offset: -1px;
}

hr {
	border: 0;
	height: 2px;
	border-bottom: 2px solid;
}

h1 {
	padding-bottom: 0.3em;
	line-height: 1.2;
	border-bottom-width: 1px;
	border-bottom-style: solid;
}

h1, h2, h3 {
	font-weight: normal;
}

table {
	border-collapse: collapse;
}

table > thead > tr > th {
	text-align: left;
	border-bottom: 1px solid;
}

table > thead > tr > th,
table > thead > tr > td,
table > tbody > tr > th,
table > tbody > tr > td {
	padding: 5px 10px;
}

table > tbody > tr + tr > td {
	border-top: 1px solid;
}

blockquote {
	margin: 0 7px 0 5px;
	padding: 0 16px 0 10px;
	border-left-width: 5px;
	border-left-style: solid;
}

code {
	font-family: Menlo, Monaco, Consolas, "Droid Sans Mono", "Courier New", monospace, "Droid Sans Fallback";
	font-size: 1em;
	line-height: 1.357em;
}

body.wordWrap pre {
	white-space: pre-wrap;
}

pre:not(.hljs),
pre.hljs code > div {
	padding: 16px;
	border-radius: 3px;
	overflow: auto;
}

pre code {
	color: var(--vscode-editor-foreground);
	tab-size: 4;
}

/** Theming */

.vscode-light pre {
	background-color: rgba(220, 220, 220, 0.4);
}

.vscode-dark pre {
	background-color: rgba(10, 10, 10, 0.4);
}

.vscode-high-contrast pre {
	background-color: rgb(0, 0, 0);
}

.vscode-high-contrast h1 {
	border-color: rgb(0, 0, 0);
}

.vscode-light table > thead > tr > th {
	border-color: rgba(0, 0, 0, 0.69);
}

.vscode-dark table > thead > tr > th {
	border-color: rgba(255, 255, 255, 0.69);
}

.vscode-light h1,
.vscode-light hr,
.vscode-light table > tbody > tr + tr > td {
	border-color: rgba(0, 0, 0, 0.18);
}

.vscode-dark h1,
.vscode-dark hr,
.vscode-dark table > tbody > tr + tr > td {
	border-color: rgba(255, 255, 255, 0.18);
}

</style>

<style>
/* Tomorrow Theme */
/* http://jmblog.github.com/color-themes-for-google-code-highlightjs */
/* Original theme - https://github.com/chriskempson/tomorrow-theme */

/* Tomorrow Comment */
.hljs-comment,
.hljs-quote {
	color: #8e908c;
}

/* Tomorrow Red */
.hljs-variable,
.hljs-template-variable,
.hljs-tag,
.hljs-name,
.hljs-selector-id,
.hljs-selector-class,
.hljs-regexp,
.hljs-deletion {
	color: #c82829;
}

/* Tomorrow Orange */
.hljs-number,
.hljs-built_in,
.hljs-builtin-name,
.hljs-literal,
.hljs-type,
.hljs-params,
.hljs-meta,
.hljs-link {
	color: #f5871f;
}

/* Tomorrow Yellow */
.hljs-attribute {
	color: #eab700;
}

/* Tomorrow Green */
.hljs-string,
.hljs-symbol,
.hljs-bullet,
.hljs-addition {
	color: #718c00;
}

/* Tomorrow Blue */
.hljs-title,
.hljs-section {
	color: #4271ae;
}

/* Tomorrow Purple */
.hljs-keyword,
.hljs-selector-tag {
	color: #8959a8;
}

.hljs {
	display: block;
	overflow-x: auto;
	color: #4d4d4c;
	padding: 0.5em;
}

.hljs-emphasis {
	font-style: italic;
}

.hljs-strong {
	font-weight: bold;
}
</style>

<style>
/*
 * Markdown PDF CSS
 */

 body {
	font-family: -apple-system, BlinkMacSystemFont, "Segoe WPC", "Segoe UI", "Ubuntu", "Droid Sans", sans-serif, "Meiryo";
	padding: 0 12px;
}

pre {
	background-color: #f8f8f8;
	border: 1px solid #cccccc;
	border-radius: 3px;
	overflow-x: auto;
	white-space: pre-wrap;
	overflow-wrap: break-word;
}

pre:not(.hljs) {
	padding: 23px;
	line-height: 19px;
}

blockquote {
	background: rgba(127, 127, 127, 0.1);
	border-color: rgba(0, 122, 204, 0.5);
}

.emoji {
	height: 1.4em;
}

code {
	font-size: 14px;
	line-height: 19px;
}

/* for inline code */
:not(pre):not(.hljs) > code {
	color: #C9AE75; /* Change the old color so it seems less like an error */
	font-size: inherit;
}

/* Page Break : use <div class="page"/> to insert page break
-------------------------------------------------------- */
.page {
	page-break-after: always;
}

</style>

<script src="https://unpkg.com/mermaid/dist/mermaid.min.js"></script>
</head>
<body>
  <script>
    mermaid.initialize({
      startOnLoad: true,
      theme: document.body.classList.contains('vscode-dark') || document.body.classList.contains('vscode-high-contrast')
          ? 'dark'
          : 'default'
    });
  </script>
<!-- TOC -->
<ul>
<li><a href="#%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96">定义和初始化</a></li>
<li><a href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">基本操作</a></li>
<li><a href="#%E8%B5%8B%E5%80%BC">赋值</a></li>
<li><a href="#%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97">算术运算</a></li>
<li><a href="#%E8%BD%AC%E7%BD%AE%E4%B8%8E%E5%85%B1%E8%BD%AD">转置与共轭</a></li>
<li><a href="#%E7%9F%A9%E9%98%B5%E4%B8%8E%E7%9F%A9%E9%98%B5%E7%9F%A9%E9%98%B5%E4%B8%8E%E5%90%91%E9%87%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E4%B9%98%E6%B3%95">矩阵与矩阵，矩阵与向量之间的乘法</a>
<ul>
<li><a href="#%E7%82%B9%E4%B9%98dot-produc%E5%92%8C%E5%8F%89%E4%B9%98%E8%BF%90%E7%AE%97cross-product">点乘dot produc和叉乘运算cross product</a></li>
</ul>
</li>
<li><a href="#reduction-operations">Reduction operations</a>
<ul>
<li><a href="#norm-computations">Norm computations</a></li>
<li><a href="#boolean-reductions">Boolean reductions</a></li>
<li><a href="#visitors">Visitors</a></li>
<li><a href="#partial-reductions">Partial reductions</a></li>
</ul>
</li>
<li><a href="#%E7%89%B9%E6%AE%8A%E7%9F%A9%E9%98%B5%E5%92%8C%E5%90%91%E9%87%8F">特殊矩阵和向量</a></li>
<li><a href="#map">Map</a>
<ul>
<li><a href="#%E5%88%9D%E5%A7%8B%E5%8C%96">初始化</a></li>
<li><a href="#%E4%BD%BF%E7%94%A8">使用</a></li>
</ul>
</li>
<li><a href="#reshape">Reshape</a>
<ul>
<li><a href="#reshape">reshape</a></li>
<li><a href="#slicing">Slicing</a></li>
</ul>
</li>
<li><a href="#in-place-function">In place function</a></li>
<li><a href="#aliasing">Aliasing</a></li>
<li><a href="#storage-orders">Storage orders</a></li>
<li><a href="#%E5%B0%86eigen%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0">将Eigen类型作为函数的参数</a>
<ul>
<li><a href="#%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF">使用模板</a></li>
</ul>
</li>
<li><a href="#block-operations">Block operations</a></li>
<li><a href="#%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">常用函数</a>
<ul>
<li><a href="#%E6%9C%80%E5%B0%8F%E5%80%BC">最小值</a></li>
</ul>
</li>
<li><a href="#%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%9D%97">高级模块</a>
<ul>
<li><a href="#lu-%E5%88%86%E8%A7%A3">LU 分解</a></li>
<li><a href="#cholesky-%E5%88%86%E8%A7%A3">Cholesky 分解</a>
<ul>
<li><a href="#%E5%88%A9%E7%94%A8cholesky%E5%88%86%E8%A7%A3%E6%B1%82%E8%A7%A3%E6%96%B9%E7%A8%8B">利用Cholesky分解求解方程</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#%E7%89%B9%E6%AE%8A%E9%97%AE%E9%A2%98">特殊问题</a></li>
</ul>
<!-- /TOC -->
<h2 id="01-%E5%AE%9A%E4%B9%89%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96">0.1. 定义和初始化</h2>
<p>matrix的原型为</p>
<pre class="hljs"><code><div>Matrix&lt;<span class="hljs-keyword">typename</span> Scalar,
       <span class="hljs-keyword">int</span> RowsAtCompileTime,
       <span class="hljs-keyword">int</span> ColsAtCompileTime,
       <span class="hljs-keyword">int</span> Options = <span class="hljs-number">0</span>,  <span class="hljs-comment">// 代表存储方式是column-major(默认) 还是 row-major. 可使用常量 {RowMajor, ColMajor}</span>
       <span class="hljs-keyword">int</span> MaxRowsAtCompileTime = RowsAtCompileTime, <span class="hljs-comment">//动态分配时行的上限</span>
       <span class="hljs-keyword">int</span> MaxColsAtCompileTime = ColsAtCompileTime&gt;<span class="hljs-comment">//动态分配时列的上限</span>
</div></code></pre>
<p>我们可以定义fixed和dynamic的matrix如下</p>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">float</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>&gt; Matrix4f;
<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">float</span>, <span class="hljs-number">3</span>, <span class="hljs-number">1</span>&gt; Vector3f;
<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">double</span>, Dynamic, Dynamic&gt; MatrixXd;
<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">int</span>, Dynamic, <span class="hljs-number">1</span>&gt; VectorXi;
typdef Matrix&lt;<span class="hljs-keyword">float</span>, <span class="hljs-number">3</span>, Dynamic&gt; Matrix3Xf;
</div></code></pre>
<p>声明：</p>
<pre class="hljs"><code><div><span class="hljs-comment">// a is a 3-by-3 matrix, with a plain float[9] array of</span>
<span class="hljs-comment">// uninitialized coefficients,</span>
Matrix3f a;
<span class="hljs-comment">// b is a dynamic-size matrix whose size is currently 0-by-0,</span>
<span class="hljs-comment">// and whose array of coefficients hasn't yet been allocated at all.</span>
MatrixXf b;

<span class="hljs-function">MatrixXf <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">10</span>,<span class="hljs-number">15</span>)</span></span>;
<span class="hljs-function">VectorXf <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">30</span>)</span></span>;
</div></code></pre>
<p>可以使用<code>,</code>的方式进行初始化：</p>
<pre class="hljs"><code><div>Matrix3f m;
m &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,
     <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>,
     <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; m;
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-function">MatrixXf <span class="hljs-title">matA</span><span class="hljs-params">(<span class="hljs-number">2</span>, <span class="hljs-number">2</span>)</span></span>;
matA &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;
<span class="hljs-function">MatrixXf <span class="hljs-title">matB</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)</span></span>;
matB &lt;&lt; matA, matA/<span class="hljs-number">10</span>, matA/<span class="hljs-number">10</span>, matA;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; matB &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
=&gt;
<span class="hljs-number">1</span>   <span class="hljs-number">2</span>   <span class="hljs-number">0.1</span> <span class="hljs-number">0.2</span>
<span class="hljs-number">3</span>   <span class="hljs-number">4</span>   <span class="hljs-number">0.3</span> <span class="hljs-number">0.4</span>
<span class="hljs-number">0.1</span> <span class="hljs-number">0.2</span>   <span class="hljs-number">1</span>   <span class="hljs-number">2</span>
<span class="hljs-number">0.3</span> <span class="hljs-number">0.4</span>   <span class="hljs-number">3</span>   <span class="hljs-number">4</span>
</div></code></pre>
<pre class="hljs"><code><div>Matrix3f m;
m.row(<span class="hljs-number">0</span>) &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>;
m.block(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>,<span class="hljs-number">2</span>,<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>;
m.col(<span class="hljs-number">2</span>).tail(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-number">6</span>, <span class="hljs-number">9</span>;
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; m;
=&gt;
<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span>
<span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span>
<span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>
</div></code></pre>
<h2 id="02-%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C">0.2. 基本操作</h2>
<ul>
<li>
<p>元素获取</p>
<p>通过使用<code>(i, j)</code>进行元素的获取</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">MatrixXd <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;
    m(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) = <span class="hljs-number">3</span>;
    m(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>) = <span class="hljs-number">2.5</span>;
    m(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>) = <span class="hljs-number">-1</span>;
    m(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) = m(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>) + m(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix m:\n"</span> &lt;&lt; m &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-function">VectorXd <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>;
    v(<span class="hljs-number">0</span>) = <span class="hljs-number">4</span>;
    v(<span class="hljs-number">1</span>) = v(<span class="hljs-number">0</span>) - <span class="hljs-number">1</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the vector v:\n"</span> &lt;&lt; v &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<p>如果使用<code>（i）</code>将是访问第0列的第i位元素 (取决于matrx的存储方式是column-major还是row-major，默认为column-major)。</p>
<pre class="hljs"><code><div><span class="hljs-function">MatrixXd <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;
m(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>) = <span class="hljs-number">3</span>;
m(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>) = <span class="hljs-number">2.5</span>;
m(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>) = <span class="hljs-number">-1</span>;
m(<span class="hljs-number">1</span>,<span class="hljs-number">1</span>) = m(<span class="hljs-number">1</span>,<span class="hljs-number">0</span>) + m(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>);
<span class="hljs-built_in">cout</span> &lt;&lt; m(<span class="hljs-number">0</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; m(<span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
<span class="hljs-number">3</span>
<span class="hljs-number">2.5</span>
</div></code></pre>
<p>获取某行或者某列使用<code>matrix.row(i)</code>,<code>matrix.col(i)</code>:</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">Eigen::MatrixXf <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</span></span>;
    m &lt;&lt; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,
         <span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,
         <span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>;
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix m:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; m &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"2nd Row: "</span> &lt;&lt; m.row(<span class="hljs-number">1</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;
    m.col(<span class="hljs-number">2</span>) += <span class="hljs-number">3</span> * m.col(<span class="hljs-number">0</span>);
    <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"After adding 3 times the first column into the third column, the matrix m is:\n"</span>;
    <span class="hljs-built_in">cout</span> &lt;&lt; m &lt;&lt; <span class="hljs-built_in">endl</span>;
}
</div></code></pre>
</li>
<li>
<p>shape相关</p>
<ul>
<li><code>rows()</code> 获取行数</li>
<li><code>cols()</code> 获取列数</li>
<li><code>size()</code> 获取元素的个数</li>
<li><code>resize()</code> 修改shape (元素的值可能会产生变化)</li>
<li><code>conservativeResize()</code> 修改shape (元素的值可保留)</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    <span class="hljs-function">MatrixXd <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">5</span>)</span></span>;
    m.resize(<span class="hljs-number">4</span>,<span class="hljs-number">3</span>);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The matrix m is of size "</span>
          &lt;&lt; m.rows() &lt;&lt; <span class="hljs-string">"x"</span> &lt;&lt; m.cols() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"It has "</span> &lt;&lt; m.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">" coefficients"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-function">VectorXd <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>;
    v.resize(<span class="hljs-number">5</span>);
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The vector v is of size "</span> &lt;&lt; v.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
    <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"As a matrix, v is of size "</span>
</div></code></pre>
</li>
</ul>
<h2 id="03-%E8%B5%8B%E5%80%BC">0.3. 赋值</h2>
<ul>
<li><code>setZero()</code></li>
<li><code>fill(val)</code></li>
<li><code>setOnes()</code></li>
</ul>
<pre class="hljs"><code><div>  <span class="hljs-function">MatrixXf <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"a is of size "</span> &lt;&lt; a.rows() &lt;&lt; <span class="hljs-string">"x"</span> &lt;&lt; a.cols() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-function">MatrixXf <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</span></span>;
  a = b;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"a is now of size "</span> &lt;&lt; a.rows() &lt;&lt; <span class="hljs-string">"x"</span> &lt;&lt; a.cols() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  m1.setZero(); <span class="hljs-comment">// 赋值全为0</span>
  m1.<span class="hljs-built_in">fill</span>(<span class="hljs-number">2</span>);  <span class="hljs-comment">// 赋值全为2</span>
  m1.setOnes(); <span class="hljs-comment">// 赋值全为1</span>
</div></code></pre>
<ul>
<li>
<p>获取数组指针</p>
<p>使用函数<code>data()</code>即可。在底层matrix和vector都是基于一维数组实现的,所以调用该函数之后得到的即是一个一维数组指针<code>Type* prt</code>(需要注意默认存储方式是column-major).</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;eigen/Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> Eigen::Dynamic;
<span class="hljs-keyword">typedef</span> Eigen::Matrix&lt;<span class="hljs-keyword">double</span>, Dynamic, Dynamic&gt; MatrixD;

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
    <span class="hljs-function">MatrixD <span class="hljs-title">X2</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)</span></span>;
    <span class="hljs-keyword">double</span> cnt = <span class="hljs-number">1</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) {
            X2(i, j) = cnt++;
        }
    }
    <span class="hljs-keyword">double</span>* arr = X2.data();
    <span class="hljs-built_in">cout</span> &lt;&lt; X2 &lt;&lt; <span class="hljs-built_in">endl</span>;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">16</span>; i++) {
        <span class="hljs-built_in">cout</span> &lt;&lt; arr[i] &lt;&lt; <span class="hljs-string">" "</span>;
    }
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
=&gt;
<span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span>
<span class="hljs-number">5</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span>  <span class="hljs-number">8</span>
<span class="hljs-number">9</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span>
<span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span> <span class="hljs-number">16</span>
<span class="hljs-number">1</span> <span class="hljs-number">5</span> <span class="hljs-number">9</span> <span class="hljs-number">13</span> <span class="hljs-number">2</span> <span class="hljs-number">6</span> <span class="hljs-number">10</span> <span class="hljs-number">14</span> <span class="hljs-number">3</span> <span class="hljs-number">7</span> <span class="hljs-number">11</span> <span class="hljs-number">15</span> <span class="hljs-number">4</span> <span class="hljs-number">8</span> <span class="hljs-number">12</span> <span class="hljs-number">16</span>
</div></code></pre>
</li>
</ul>
<h2 id="04-%E7%AE%97%E6%9C%AF%E8%BF%90%E7%AE%97">0.4. 算术运算</h2>
<ul>
<li>
<p>加减运算</p>
<ul>
<li>binary operator + as in a+b</li>
<li>binary operator - as in a-b</li>
<li>unary operator - as in -a</li>
<li>compound operator += as in a+=b</li>
<li>compound operator -= as in a-=b</li>
</ul>
</li>
<li>
<p>与标量的乘除运算</p>
<ul>
<li>binary operator * as in matrix*scalar</li>
<li>binary operator * as in scalar*matrix</li>
<li>binary operator / as in matrix/scalar</li>
<li>compound operator *= as in matrix *=scalar</li>
<li>compound operator /= as in matrix/=scalar</li>
</ul>
</li>
</ul>
<p><strong>需要注意</strong>在Eigen库中没有实现matrix与标量进行加减的运算！所以我们需要自己写个函数来实现加减运算，比如：</p>
<pre class="hljs"><code><div>  <span class="hljs-comment">// Eigen Matrix plus a scalar</span>
  <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class Derived, class Type&gt;
  <span class="hljs-keyword">void</span> <span class="hljs-title">PlusScalar</span> <span class="hljs-params">(MatrixBase&lt;Derived&gt;&amp; m1, Type num)</span> </span>{
    <span class="hljs-keyword">int</span> rows = m1.rows(), cols = m1.cols();
    m1 = m1 + num * MatrixBase&lt;Derived&gt;::Constant(rows, cols, num);
  }

  <span class="hljs-comment">// Eigen Matrix minus a scalar</span>
  <span class="hljs-function"><span class="hljs-keyword">template</span>&lt;class Derived, class Type&gt;
  <span class="hljs-keyword">void</span> <span class="hljs-title">MinusScalar</span> <span class="hljs-params">(MatrixBase&lt;Derived&gt;&amp; m1, Type num)</span> </span>{
    <span class="hljs-keyword">int</span> rows = m1.rows(), cols = m1.cols();
    m1 = m1 - num * MatrixBase&lt;Derived&gt;::Constant(rows, cols, num);
  }

</div></code></pre>
<h2 id="05-%E8%BD%AC%E7%BD%AE%E4%B8%8E%E5%85%B1%E8%BD%AD">0.5. 转置与共轭</h2>
<ul>
<li><code>transpose()</code></li>
<li><code>conjugate()</code></li>
<li><code>adjoint()</code></li>
</ul>
<pre class="hljs"><code><div>MatrixXcf a = MatrixXcf::Random(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>);
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix a\n"</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix a^T\n"</span> &lt;&lt; a.transpose() &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the conjugate of a\n"</span> &lt;&lt; a.conjugate() &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix a^*\n"</span> &lt;&lt; a.adjoint() &lt;&lt; <span class="hljs-built_in">endl</span>;
</div></code></pre>
<p>In place 的转置</p>
<pre class="hljs"><code><div>Matrix2i a; a &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix a:\n"</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;
a = a.transpose(); <span class="hljs-comment">// !!! do NOT do this !!!</span>
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"and the result of the aliasing effect:\n"</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
Here is the matrix a:
<span class="hljs-number">1</span> <span class="hljs-number">2</span>
<span class="hljs-number">3</span> <span class="hljs-number">4</span>
<span class="hljs-keyword">and</span> the result of the aliasing effect:
<span class="hljs-number">1</span> <span class="hljs-number">2</span>
<span class="hljs-number">2</span> <span class="hljs-number">4</span>

MatrixXf a(<span class="hljs-number">2</span>,<span class="hljs-number">3</span>); a &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the initial matrix a:\n"</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;
a.transposeInPlace();
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"and after being transposed:\n"</span> &lt;&lt; a &lt;&lt; <span class="hljs-built_in">endl</span>;
</div></code></pre>
<h2 id="06-%E7%9F%A9%E9%98%B5%E4%B8%8E%E7%9F%A9%E9%98%B5%E7%9F%A9%E9%98%B5%E4%B8%8E%E5%90%91%E9%87%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E4%B9%98%E6%B3%95">0.6. 矩阵与矩阵，矩阵与向量之间的乘法</h2>
<ul>
<li>binary operator * as in a*b</li>
<li>compound operator *= as in a *=b
执行点乘运算</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  Matrix2d mat;
  mat &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>,
         <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;
  <span class="hljs-function">Vector2d <span class="hljs-title">u</span><span class="hljs-params">(<span class="hljs-number">-1</span>,<span class="hljs-number">1</span>)</span>, <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">0</span>)</span></span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat*mat:\n"</span> &lt;&lt; mat*mat &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat*u:\n"</span> &lt;&lt; mat*u &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is u^T*mat:\n"</span> &lt;&lt; u.transpose()*mat &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is u^T*v:\n"</span> &lt;&lt; u.transpose()*v &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is u*v^T:\n"</span> &lt;&lt; u*v.transpose() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Let's multiply mat by itself"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
  mat = mat*mat;
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Now mat is mat:\n"</span> &lt;&lt; mat &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
=&gt;
Here is mat*mat:
 <span class="hljs-number">7</span> <span class="hljs-number">10</span>
<span class="hljs-number">15</span> <span class="hljs-number">22</span>
Here is mat*u:
<span class="hljs-number">1</span>
<span class="hljs-number">1</span>
Here is u^T*mat:
<span class="hljs-number">2</span> <span class="hljs-number">2</span>
Here is u^T*v:
<span class="hljs-number">-2</span>
Here is u*v^T:
<span class="hljs-number">-2</span> <span class="hljs-number">-0</span>
 <span class="hljs-number">2</span>  <span class="hljs-number">0</span>
Let<span class="hljs-number">'</span>s multiply mat by itself
Now mat is mat:
 <span class="hljs-number">7</span> <span class="hljs-number">10</span>
<span class="hljs-number">15</span> <span class="hljs-number">22</span>
</div></code></pre>
<p>注:为了避免aliasing的问题，可以使用<code>noalias()</code></p>
<pre class="hljs"><code><div>c.noalias() += a * b;
</div></code></pre>
<h3 id="061-%E7%82%B9%E4%B9%98dot-produc%E5%92%8C%E5%8F%89%E4%B9%98%E8%BF%90%E7%AE%97cross-product">0.6.1. 点乘(dot produc)和叉乘运算(cross product)</h3>
<ul>
<li><code>dot()</code></li>
<li><code>corss()</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">Vector3d <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>)</span></span>;
  <span class="hljs-function">Vector3d <span class="hljs-title">w</span><span class="hljs-params">(<span class="hljs-number">0</span>,<span class="hljs-number">1</span>,<span class="hljs-number">2</span>)</span></span>;

  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Dot product: "</span> &lt;&lt; v.dot(w) &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-keyword">double</span> dp = v.adjoint()*w; <span class="hljs-comment">// automatic conversion of the inner product to a scalar</span>
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Dot product via a matrix product: "</span> &lt;&lt; dp &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Cross product:\n"</span> &lt;&lt; v.cross(w) &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
Dot product: <span class="hljs-number">8</span>
Dot product via a matrix product: <span class="hljs-number">8</span>
Cross product:
 <span class="hljs-number">1</span>
<span class="hljs-number">-2</span>
 <span class="hljs-number">1</span>
</div></code></pre>
<h2 id="07-reduction-operations">0.7. Reduction operations</h2>
<ul>
<li><code>sum()</code></li>
<li><code>prod()</code></li>
<li><code>maxCoeff()</code></li>
<li><code>minCoeff()</code></li>
<li><code>trace()</code> 计算对角线元素的和</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  Eigen::Matrix2d mat;
  mat &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>,
         <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.sum():       "</span> &lt;&lt; mat.sum()       &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.prod():      "</span> &lt;&lt; mat.prod()      &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.mean():      "</span> &lt;&lt; mat.mean()      &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.minCoeff():  "</span> &lt;&lt; mat.minCoeff()  &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.maxCoeff():  "</span> &lt;&lt; mat.maxCoeff()  &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is mat.trace():     "</span> &lt;&lt; mat.trace()     &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
Here is mat.sum():       <span class="hljs-number">10</span>
Here is mat.prod():      <span class="hljs-number">24</span>
Here is mat.mean():      <span class="hljs-number">2.5</span>
Here is mat.minCoeff():  <span class="hljs-number">1</span>
Here is mat.maxCoeff():  <span class="hljs-number">4</span>
Here is mat.trace():     <span class="hljs-number">5</span>
</div></code></pre>
<h3 id="071-norm-computations">0.7.1. Norm computations</h3>
<ul>
<li><code>squaredNorm()</code> 求向量v的$||v||^2$</li>
<li><code>norm()</code> 求 向量的$||V||$</li>
<li><code>lpNorm&lt;p&gt;()</code> p-norm</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">VectorXf <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">2</span>)</span></span>;
  <span class="hljs-function">MatrixXf <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span>, <span class="hljs-title">n</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;

  v &lt;&lt; <span class="hljs-number">-1</span>,
       <span class="hljs-number">2</span>;

  m &lt;&lt; <span class="hljs-number">1</span>,<span class="hljs-number">-2</span>,
       <span class="hljs-number">-3</span>,<span class="hljs-number">4</span>;

  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.squaredNorm() = "</span> &lt;&lt; v.squaredNorm() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.norm() = "</span> &lt;&lt; v.norm() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.lpNorm&lt;1&gt;() = "</span> &lt;&lt; v.lpNorm&lt;<span class="hljs-number">1</span>&gt;() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.lpNorm&lt;Infinity&gt;() = "</span> &lt;&lt; v.lpNorm&lt;Infinity&gt;() &lt;&lt; <span class="hljs-built_in">endl</span>;

  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m.squaredNorm() = "</span> &lt;&lt; m.squaredNorm() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m.norm() = "</span> &lt;&lt; m.norm() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m.lpNorm&lt;1&gt;() = "</span> &lt;&lt; m.lpNorm&lt;<span class="hljs-number">1</span>&gt;() &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
v.squaredNorm() = <span class="hljs-number">5</span>
v.norm() = <span class="hljs-number">2.23607</span>
v.lpNorm&lt;<span class="hljs-number">1</span>&gt;() = <span class="hljs-number">3</span>
v.lpNorm&lt;Infinity&gt;() = <span class="hljs-number">2</span>

m.squaredNorm() = <span class="hljs-number">30</span>
m.norm() = <span class="hljs-number">5.47723</span>
m.lpNorm&lt;<span class="hljs-number">1</span>&gt;() = <span class="hljs-number">10</span>
m.lpNorm&lt;Infinity&gt;() = <span class="hljs-number">4</span>
</div></code></pre>
<h3 id="072-boolean-reductions">0.7.2. Boolean reductions</h3>
<ul>
<li><code>all()</code> 检查是否所有的元素都为true</li>
<li><code>any()</code> 检查是否存在至少一个元素为true</li>
<li><code>count()</code> 计算元素中true的个数</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">ArrayXXf <span class="hljs-title">a</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;
  a &lt;&lt; <span class="hljs-number">1</span>,<span class="hljs-number">2</span>,
       <span class="hljs-number">3</span>,<span class="hljs-number">4</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 0).all()   = "</span> &lt;&lt; (a &gt; <span class="hljs-number">0</span>).all() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 0).any()   = "</span> &lt;&lt; (a &gt; <span class="hljs-number">0</span>).any() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 0).count() = "</span> &lt;&lt; (a &gt; <span class="hljs-number">0</span>).count() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 2).all()   = "</span> &lt;&lt; (a &gt; <span class="hljs-number">2</span>).all() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 2).any()   = "</span> &lt;&lt; (a &gt; <span class="hljs-number">2</span>).any() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"(a &gt; 2).count() = "</span> &lt;&lt; (a &gt; <span class="hljs-number">2</span>).count() &lt;&lt; <span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<h3 id="073-visitors">0.7.3. Visitors</h3>
<ul>
<li><code>maxCoeff(&amp;x, &amp;y)</code></li>
<li><code>minCoeff(&amp;x, &amp;y)</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">Eigen::MatrixXf <span class="hljs-title">m</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>)</span></span>;

  m &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>,
       <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;

  <span class="hljs-comment">//get location of maximum</span>
  MatrixXf::Index maxRow, maxCol;
  <span class="hljs-keyword">float</span> <span class="hljs-built_in">max</span> = m.maxCoeff(&amp;maxRow, &amp;maxCol);

  <span class="hljs-comment">//get location of minimum</span>
  MatrixXf::Index minRow, minCol;
  <span class="hljs-keyword">float</span> <span class="hljs-built_in">min</span> = m.minCoeff(&amp;minRow, &amp;minCol);

  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Max: "</span> &lt;&lt; <span class="hljs-built_in">max</span> &lt;&lt;  <span class="hljs-string">", at: "</span> &lt;&lt;
     maxRow &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; maxCol &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Min: "</span> &lt;&lt; <span class="hljs-built_in">min</span> &lt;&lt; <span class="hljs-string">", at: "</span> &lt;&lt;
     minRow &lt;&lt; <span class="hljs-string">","</span> &lt;&lt; minCol &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
Max: <span class="hljs-number">4</span>, at: <span class="hljs-number">1</span>,<span class="hljs-number">1</span>
Min: <span class="hljs-number">1</span>, at: <span class="hljs-number">0</span>,<span class="hljs-number">0</span>
</div></code></pre>
<h3 id="074-partial-reductions">0.7.4. Partial reductions</h3>
<ul>
<li><code>colwise()</code></li>
<li><code>rowwise()</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">Eigen::MatrixXf <span class="hljs-title">mat</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)</span></span>;
  mat &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>,
         <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>;

  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Column's maximum: "</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>
   &lt;&lt; mat.colwise().maxCoeff() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
=&gt;
Column<span class="hljs-number">'</span>s maximum:
<span class="hljs-number">3</span> <span class="hljs-number">2</span> <span class="hljs-number">7</span> <span class="hljs-number">9</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">Eigen::MatrixXf <span class="hljs-title">mat</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">4</span>)</span></span>;
  mat &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">6</span>, <span class="hljs-number">9</span>,
         <span class="hljs-number">3</span>, <span class="hljs-number">1</span>, <span class="hljs-number">7</span>, <span class="hljs-number">2</span>;

  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Row's maximum: "</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>
   &lt;&lt; mat.rowwise().maxCoeff() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
=&gt;
Row<span class="hljs-number">'</span>s maximum:
<span class="hljs-number">9</span>
<span class="hljs-number">7</span>
</div></code></pre>
<h2 id="08-%E7%89%B9%E6%AE%8A%E7%9F%A9%E9%98%B5%E5%92%8C%E5%90%91%E9%87%8F">0.8. 特殊矩阵和向量</h2>
<ul>
<li><code>Zero()</code></li>
<li><code>Constant(value)</code></li>
<li><code>Random()</code></li>
<li><code>Identity()</code></li>
<li><code>LinSpaced(size, low, high)</code></li>
</ul>
<pre class="hljs"><code><div><span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A fixed-size array:\n"</span>;
Array33f a1 = Array33f::Zero();
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; a1 &lt;&lt; <span class="hljs-string">"\n\n"</span>;

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A one-dimensional dynamic-size array:\n"</span>;
ArrayXf a2 = ArrayXf::Zero(<span class="hljs-number">3</span>);
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; a2 &lt;&lt; <span class="hljs-string">"\n\n"</span>;

<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"A two-dimensional dynamic-size array:\n"</span>;
ArrayXXf a3 = ArrayXXf::Zero(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);
<span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; a3 &lt;&lt; <span class="hljs-string">"\n"</span>;
</div></code></pre>
<h2 id="09-map">0.9. Map</h2>
<p>将c/c++中的array转化为Eigen中的vector和matrix。</p>
<p><code>Map&lt;Matrix&lt;typename Scalar, int RowsAtCompileTime, int ColsAtCompileTime&gt; &gt;</code></p>
<h3 id="091-%E5%88%9D%E5%A7%8B%E5%8C%96">0.9.1. 初始化</h3>
<pre class="hljs"><code><div><span class="hljs-function">Map&lt;MatrixXf&gt; <span class="hljs-title">mf</span><span class="hljs-params">(pf,rows,columns)</span></span>;
<span class="hljs-function">Map&lt;<span class="hljs-keyword">const</span> Vector4i&gt; <span class="hljs-title">mi</span><span class="hljs-params">(pi)</span></span>;

</div></code></pre>
<h3 id="092-%E4%BD%BF%E7%94%A8">0.9.2. 使用</h3>
<p><code>Map</code>对象可以像Eigen中的其它类型一样使用。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">float</span>,<span class="hljs-number">1</span>,Dynamic&gt; MatrixType;
<span class="hljs-keyword">typedef</span> Map&lt;MatrixType&gt; MapType;
<span class="hljs-keyword">typedef</span> Map&lt;<span class="hljs-keyword">const</span> MatrixType&gt; MapTypeConst;   <span class="hljs-comment">// a read-only map</span>
<span class="hljs-keyword">const</span> <span class="hljs-keyword">int</span> n_dims = <span class="hljs-number">5</span>;

<span class="hljs-function">MatrixType <span class="hljs-title">m1</span><span class="hljs-params">(n_dims)</span>, <span class="hljs-title">m2</span><span class="hljs-params">(n_dims)</span></span>;
m1.setRandom();
m2.setRandom();
<span class="hljs-keyword">float</span> *p = &amp;m2(<span class="hljs-number">0</span>);  <span class="hljs-comment">// get the address storing the data for m2</span>
<span class="hljs-function">MapType <span class="hljs-title">m2map</span><span class="hljs-params">(p,m2.<span class="hljs-built_in">size</span>())</span></span>;   <span class="hljs-comment">// m2map shares data with m2</span>
<span class="hljs-function">MapTypeConst <span class="hljs-title">m2mapconst</span><span class="hljs-params">(p,m2.<span class="hljs-built_in">size</span>())</span></span>;  <span class="hljs-comment">// a read-only accessor for m2</span>

<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m1: "</span> &lt;&lt; m1 &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m2: "</span> &lt;&lt; m2 &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Squared euclidean distance: "</span> &lt;&lt; (m1-m2).squaredNorm() &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Squared euclidean distance, using map: "</span> &lt;&lt;
  (m1-m2map).squaredNorm() &lt;&lt; <span class="hljs-built_in">endl</span>;
m2map(<span class="hljs-number">3</span>) = <span class="hljs-number">7</span>;   <span class="hljs-comment">// this will change m2, since they share the same array</span>
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Updated m2: "</span> &lt;&lt; m2 &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m2 coefficient 2, constant accessor: "</span> &lt;&lt; m2mapconst(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-comment">/* m2mapconst(2) = 5; */</span>   <span class="hljs-comment">// this yields a compile-time error</span>
=&gt;
m1:   <span class="hljs-number">0.68</span> <span class="hljs-number">-0.211</span>  <span class="hljs-number">0.566</span>  <span class="hljs-number">0.597</span>  <span class="hljs-number">0.823</span>
m2: <span class="hljs-number">-0.605</span>  <span class="hljs-number">-0.33</span>  <span class="hljs-number">0.536</span> <span class="hljs-number">-0.444</span>  <span class="hljs-number">0.108</span>
Squared euclidean distance: <span class="hljs-number">3.26</span>
Squared euclidean distance, <span class="hljs-keyword">using</span> <span class="hljs-built_in">map</span>: <span class="hljs-number">3.26</span>
Updated m2: <span class="hljs-number">-0.605</span>  <span class="hljs-number">-0.33</span>  <span class="hljs-number">0.536</span>      <span class="hljs-number">7</span>  <span class="hljs-number">0.108</span>
m2 coefficient <span class="hljs-number">2</span>, constant accessor: <span class="hljs-number">0.536</span>
</div></code></pre>
<p>改变Map的数组需要使用<code>new</code>:</p>
<pre class="hljs"><code><div><span class="hljs-keyword">int</span> data[] = {<span class="hljs-number">1</span>,<span class="hljs-number">2</span>,<span class="hljs-number">3</span>,<span class="hljs-number">4</span>,<span class="hljs-number">5</span>,<span class="hljs-number">6</span>,<span class="hljs-number">7</span>,<span class="hljs-number">8</span>,<span class="hljs-number">9</span>};
<span class="hljs-function">Map&lt;RowVectorXi&gt; <span class="hljs-title">v</span><span class="hljs-params">(data,<span class="hljs-number">4</span>)</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The mapped vector v is: "</span> &lt;&lt; v &lt;&lt; <span class="hljs-string">"\n"</span>;
<span class="hljs-keyword">new</span> (&amp;v) Map&lt;RowVectorXi&gt;(data+<span class="hljs-number">4</span>,<span class="hljs-number">5</span>);
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Now v is: "</span> &lt;&lt; v &lt;&lt; <span class="hljs-string">"\n"</span>;
=&gt;
The mapped <span class="hljs-built_in">vector</span> v is: <span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span>
Now v is: <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-function">Map&lt;Matrix3f&gt; <span class="hljs-title">A</span><span class="hljs-params">(<span class="hljs-literal">NULL</span>)</span></span>;  <span class="hljs-comment">// don't try to use this matrix yet!</span>
<span class="hljs-function">VectorXf <span class="hljs-title">b</span><span class="hljs-params">(n_matrices)</span></span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; n_matrices; i++)
{
  <span class="hljs-keyword">new</span> (&amp;A) Map&lt;Matrix3f&gt;(get_matrix_pointer(i));
  b(i) = A.trace();
}
</div></code></pre>
<h2 id="010-reshape">0.10. Reshape</h2>
<p>Eigen中没有方便的方法用来执行切分和reshape一个matrix,要执行这个功能需要借助<code>Map</code>类。</p>
<h3 id="0101-reshape">0.10.1. reshape</h3>
<pre class="hljs"><code><div><span class="hljs-function">MatrixXf <span class="hljs-title">M1</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</span></span>;    <span class="hljs-comment">// Column-major storage</span>
M1 &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,
      <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>,
      <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>;

<span class="hljs-function">Map&lt;RowVectorXf&gt; <span class="hljs-title">v1</span><span class="hljs-params">(M1.data(), M1.<span class="hljs-built_in">size</span>())</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v1:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v1 &lt;&lt; <span class="hljs-built_in">endl</span>;

<span class="hljs-function">Matrix&lt;<span class="hljs-keyword">float</span>,Dynamic,Dynamic,RowMajor&gt; <span class="hljs-title">M2</span><span class="hljs-params">(M1)</span></span>;
<span class="hljs-function">Map&lt;RowVectorXf&gt; <span class="hljs-title">v2</span><span class="hljs-params">(M2.data(), M2.<span class="hljs-built_in">size</span>())</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v2:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v2 &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
v1:
<span class="hljs-number">1</span> <span class="hljs-number">4</span> <span class="hljs-number">7</span> <span class="hljs-number">2</span> <span class="hljs-number">5</span> <span class="hljs-number">8</span> <span class="hljs-number">3</span> <span class="hljs-number">6</span> <span class="hljs-number">9</span>
v2:
<span class="hljs-number">1</span> <span class="hljs-number">2</span> <span class="hljs-number">3</span> <span class="hljs-number">4</span> <span class="hljs-number">5</span> <span class="hljs-number">6</span> <span class="hljs-number">7</span> <span class="hljs-number">8</span> <span class="hljs-number">9</span>
</div></code></pre>
<pre class="hljs"><code><div><span class="hljs-function">MatrixXf <span class="hljs-title">M1</span><span class="hljs-params">(<span class="hljs-number">2</span>,<span class="hljs-number">6</span>)</span></span>;    <span class="hljs-comment">// Column-major storage</span>
M1 &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,  <span class="hljs-number">4</span>,  <span class="hljs-number">5</span>,  <span class="hljs-number">6</span>,
      <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>, <span class="hljs-number">10</span>, <span class="hljs-number">11</span>, <span class="hljs-number">12</span>;

<span class="hljs-function">Map&lt;MatrixXf&gt; <span class="hljs-title">M2</span><span class="hljs-params">(M1.data(), <span class="hljs-number">6</span>,<span class="hljs-number">2</span>)</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"M2:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; M2 &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
M2:
 <span class="hljs-number">1</span>  <span class="hljs-number">4</span>
 <span class="hljs-number">7</span> <span class="hljs-number">10</span>
 <span class="hljs-number">2</span>  <span class="hljs-number">5</span>
 <span class="hljs-number">8</span> <span class="hljs-number">11</span>
 <span class="hljs-number">3</span>  <span class="hljs-number">6</span>
 <span class="hljs-number">9</span> <span class="hljs-number">12</span>

</div></code></pre>
<h3 id="0102-slicing">0.10.2. Slicing</h3>
<pre class="hljs"><code><div>RowVectorXf v = RowVectorXf::LinSpaced(<span class="hljs-number">20</span>,<span class="hljs-number">0</span>,<span class="hljs-number">19</span>);
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Input:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-function">Map&lt;RowVectorXf,0,InnerStride&lt;2&gt; &gt; <span class="hljs-title">v2</span><span class="hljs-params">(v.data(), v.<span class="hljs-built_in">size</span>()/<span class="hljs-number">2</span>)</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Even:"</span> &lt;&lt; v2 &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
Input:
 <span class="hljs-number">0</span>  <span class="hljs-number">1</span>  <span class="hljs-number">2</span>  <span class="hljs-number">3</span>  <span class="hljs-number">4</span>  <span class="hljs-number">5</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span>  <span class="hljs-number">8</span>  <span class="hljs-number">9</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span> <span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span> <span class="hljs-number">16</span> <span class="hljs-number">17</span> <span class="hljs-number">18</span> <span class="hljs-number">19</span>
Even: <span class="hljs-number">0</span>  <span class="hljs-number">2</span>  <span class="hljs-number">4</span>  <span class="hljs-number">6</span>  <span class="hljs-number">8</span> <span class="hljs-number">10</span> <span class="hljs-number">12</span> <span class="hljs-number">14</span> <span class="hljs-number">16</span> <span class="hljs-number">18</span>
</div></code></pre>
<pre class="hljs"><code><div>MatrixXf M1 = MatrixXf::Random(<span class="hljs-number">3</span>,<span class="hljs-number">8</span>);
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Column major input:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; M1 &lt;&lt; <span class="hljs-string">"\n"</span>;
<span class="hljs-function">Map&lt;MatrixXf,0,OuterStride&lt;&gt; &gt; <span class="hljs-title">M2</span><span class="hljs-params">(M1.data(), M1.rows(), (M1.cols()+<span class="hljs-number">2</span>)/<span class="hljs-number">3</span>, OuterStride&lt;&gt;(M1.outerStride()*<span class="hljs-number">3</span>))</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"1 column over 3:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; M2 &lt;&lt; <span class="hljs-string">"\n"</span>;

<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">float</span>,Dynamic,Dynamic,RowMajor&gt; RowMajorMatrixXf;
<span class="hljs-function">RowMajorMatrixXf <span class="hljs-title">M3</span><span class="hljs-params">(M1)</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Row major input:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; M3 &lt;&lt; <span class="hljs-string">"\n"</span>;
<span class="hljs-function">Map&lt;RowMajorMatrixXf,0,Stride&lt;Dynamic,3&gt; &gt; <span class="hljs-title">M4</span><span class="hljs-params">(M3.data(), M3.rows(), (M3.cols()+<span class="hljs-number">2</span>)/<span class="hljs-number">3</span>,
Stride&lt;Dynamic,<span class="hljs-number">3</span>&gt;(M3.outerStride(),<span class="hljs-number">3</span>))</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"1 column over 3:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; M4 &lt;&lt; <span class="hljs-string">"\n"</span>;
=&gt;
Column major input:
   <span class="hljs-number">0.68</span>   <span class="hljs-number">0.597</span>   <span class="hljs-number">-0.33</span>   <span class="hljs-number">0.108</span>   <span class="hljs-number">-0.27</span>   <span class="hljs-number">0.832</span>  <span class="hljs-number">-0.717</span>  <span class="hljs-number">-0.514</span>
 <span class="hljs-number">-0.211</span>   <span class="hljs-number">0.823</span>   <span class="hljs-number">0.536</span> <span class="hljs-number">-0.0452</span>  <span class="hljs-number">0.0268</span>   <span class="hljs-number">0.271</span>   <span class="hljs-number">0.214</span>  <span class="hljs-number">-0.726</span>
  <span class="hljs-number">0.566</span>  <span class="hljs-number">-0.605</span>  <span class="hljs-number">-0.444</span>   <span class="hljs-number">0.258</span>   <span class="hljs-number">0.904</span>   <span class="hljs-number">0.435</span>  <span class="hljs-number">-0.967</span>   <span class="hljs-number">0.608</span>
<span class="hljs-number">1</span> column over <span class="hljs-number">3</span>:
   <span class="hljs-number">0.68</span>   <span class="hljs-number">0.108</span>  <span class="hljs-number">-0.717</span>
 <span class="hljs-number">-0.211</span> <span class="hljs-number">-0.0452</span>   <span class="hljs-number">0.214</span>
  <span class="hljs-number">0.566</span>   <span class="hljs-number">0.258</span>  <span class="hljs-number">-0.967</span>
Row major input:
   <span class="hljs-number">0.68</span>   <span class="hljs-number">0.597</span>   <span class="hljs-number">-0.33</span>   <span class="hljs-number">0.108</span>   <span class="hljs-number">-0.27</span>   <span class="hljs-number">0.832</span>  <span class="hljs-number">-0.717</span>  <span class="hljs-number">-0.514</span>
 <span class="hljs-number">-0.211</span>   <span class="hljs-number">0.823</span>   <span class="hljs-number">0.536</span> <span class="hljs-number">-0.0452</span>  <span class="hljs-number">0.0268</span>   <span class="hljs-number">0.271</span>   <span class="hljs-number">0.214</span>  <span class="hljs-number">-0.726</span>
  <span class="hljs-number">0.566</span>  <span class="hljs-number">-0.605</span>  <span class="hljs-number">-0.444</span>   <span class="hljs-number">0.258</span>   <span class="hljs-number">0.904</span>   <span class="hljs-number">0.435</span>  <span class="hljs-number">-0.967</span>   <span class="hljs-number">0.608</span>
<span class="hljs-number">1</span> column over <span class="hljs-number">3</span>:
   <span class="hljs-number">0.68</span>   <span class="hljs-number">0.108</span>  <span class="hljs-number">-0.717</span>
 <span class="hljs-number">-0.211</span> <span class="hljs-number">-0.0452</span>   <span class="hljs-number">0.214</span>
  <span class="hljs-number">0.566</span>   <span class="hljs-number">0.258</span>  <span class="hljs-number">-0.967</span>
</div></code></pre>
<h2 id="011-in-place-function">0.11. In place function</h2>
<ul>
<li><code>MatrixBase::adjointInPlace()</code></li>
<li><code>DenseBase::reverseInPlace()</code></li>
<li><code>DenseBase::transposeInPlace()</code></li>
</ul>
<h2 id="012-aliasing">0.12. Aliasing</h2>
<p><code>Aliasing</code>问题会出现在同一个matrix或者array出现在赋值语句的两边， 比如<code>m=m.transpose()</code></p>
<ul>
<li>可以使用<code>eval()</code>函数来避免该问题</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-function">MatrixXi <span class="hljs-title">mat</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</span></span>;
mat &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>,   <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>,   <span class="hljs-number">7</span>, <span class="hljs-number">8</span>, <span class="hljs-number">9</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix mat:\n"</span> &lt;&lt; mat &lt;&lt; <span class="hljs-built_in">endl</span>;

<span class="hljs-comment">// The eval() solves the aliasing problem</span>
mat.bottomRightCorner(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>) = mat.topLeftCorner(<span class="hljs-number">2</span>,<span class="hljs-number">2</span>).eval();
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"After the assignment, mat = \n"</span> &lt;&lt; mat &lt;&lt; <span class="hljs-built_in">endl</span>;
</div></code></pre>
<h2 id="013-storage-orders">0.13. Storage orders</h2>
<p>矩阵在内存中存储有两种方式row-major和column-major.</p>
<pre class="hljs"><code><div>Matrix&lt;<span class="hljs-keyword">int</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, ColMajor&gt; Acolmajor;
Acolmajor &lt;&lt; <span class="hljs-number">8</span>, <span class="hljs-number">2</span>, <span class="hljs-number">2</span>, <span class="hljs-number">9</span>,
             <span class="hljs-number">9</span>, <span class="hljs-number">1</span>, <span class="hljs-number">4</span>, <span class="hljs-number">4</span>,
             <span class="hljs-number">3</span>, <span class="hljs-number">5</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The matrix A:"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; Acolmajor &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;

<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"In memory (column-major):"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Acolmajor.<span class="hljs-built_in">size</span>(); i++)
  <span class="hljs-built_in">cout</span> &lt;&lt; *(Acolmajor.data() + i) &lt;&lt; <span class="hljs-string">"  "</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;

Matrix&lt;<span class="hljs-keyword">int</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, RowMajor&gt; Arowmajor = Acolmajor;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"In memory (row-major):"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; Arowmajor.<span class="hljs-built_in">size</span>(); i++)
  <span class="hljs-built_in">cout</span> &lt;&lt; *(Arowmajor.data() + i) &lt;&lt; <span class="hljs-string">"  "</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
</div></code></pre>
<h2 id="014-%E5%B0%86eigen%E7%B1%BB%E5%9E%8B%E4%BD%9C%E4%B8%BA%E5%87%BD%E6%95%B0%E7%9A%84%E5%8F%82%E6%95%B0">0.14. 将Eigen类型作为函数的参数</h2>
<h3 id="0141-%E4%BD%BF%E7%94%A8%E6%A8%A1%E6%9D%BF">0.14.1. 使用模板</h3>
<ul>
<li><code>EigenBase</code> 示例：</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Core&gt;</span></span>
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_size</span><span class="hljs-params">(<span class="hljs-keyword">const</span> EigenBase&lt;Derived&gt;&amp; b)</span>
</span>{
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"size (rows, cols): "</span> &lt;&lt; b.<span class="hljs-built_in">size</span>() &lt;&lt; <span class="hljs-string">" ("</span> &lt;&lt; b.rows()
            &lt;&lt; <span class="hljs-string">", "</span> &lt;&lt; b.cols() &lt;&lt; <span class="hljs-string">")"</span> &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
    Vector3f v;
    print_size(v);
    <span class="hljs-comment">// v.asDiagonal() returns a 3x3 diagonal matrix pseudo-expression</span>
    print_size(v.asDiagonal());
}
</div></code></pre>
<ul>
<li><code>DenseBase</code>示例：</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_block</span><span class="hljs-params">(<span class="hljs-keyword">const</span> DenseBase&lt;Derived&gt;&amp; b, <span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> r, <span class="hljs-keyword">int</span> c)</span>
</span>{
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"block: "</span> &lt;&lt; b.block(x,y,r,c) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<ul>
<li><code>ArrayBase</code>示例：</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_max_coeff</span><span class="hljs-params">(<span class="hljs-keyword">const</span> ArrayBase&lt;Derived&gt; &amp;a)</span>
</span>{
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"max: "</span> &lt;&lt; a.maxCoeff() &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<ul>
<li><code>MatrixBase</code>示例：</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> Derived&gt;
<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">print_inv_cond</span><span class="hljs-params">(<span class="hljs-keyword">const</span> MatrixBase&lt;Derived&gt;&amp; a)</span>
</span>{
  <span class="hljs-keyword">const</span> <span class="hljs-keyword">typename</span> JacobiSVD&lt;<span class="hljs-keyword">typename</span> Derived::PlainObject&gt;::SingularValuesType&amp;
  sing_vals = a.jacobiSvd().singularValues();
  <span class="hljs-built_in">std</span>::<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"inv cond: "</span> &lt;&lt; sing_vals(sing_vals.<span class="hljs-built_in">size</span>()<span class="hljs-number">-1</span>) / sing_vals(<span class="hljs-number">0</span>) &lt;&lt; <span class="hljs-built_in">std</span>::<span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<ul>
<li>Multiple templated arguments 示例：</li>
</ul>
<pre class="hljs"><code><div><span class="hljs-keyword">template</span> &lt;<span class="hljs-keyword">typename</span> DerivedA,<span class="hljs-keyword">typename</span> DerivedB&gt;
<span class="hljs-function"><span class="hljs-keyword">typename</span> DerivedA::Scalar <span class="hljs-title">squaredist</span><span class="hljs-params">(<span class="hljs-keyword">const</span> MatrixBase&lt;DerivedA&gt;&amp; p1,<span class="hljs-keyword">const</span> MatrixBase&lt;DerivedB&gt;&amp; p2)</span>
</span>{
  <span class="hljs-keyword">return</span> (p1-p2).squaredNorm();
}
</div></code></pre>
<h2 id="015-block-operations">0.15. Block operations</h2>
<p><code>block operations</code>提供对matrix进行整块数据的操作。</p>
<table>
<thead>
<tr>
<th>Block operation</th>
<th>Version constructing a dynamic-size block expression</th>
<th>Version constructing a fixed-size block expression</th>
</tr>
</thead>
<tbody>
<tr>
<td>Top-left p by q block *</td>
<td><code>matrix.topLeftCorner(p,q);</code></td>
<td><code>matrix.topLeftCorner&lt;p,q&gt;();</code></td>
</tr>
<tr>
<td>Bottom-left p by q block *</td>
<td><code>matrix.bottomLeftCorner(p,q);</code></td>
<td><code>matrix.bottomLeftCorner&lt;p,q&gt;();</code></td>
</tr>
<tr>
<td>Top-right p by q block *</td>
<td><code>matrix.topRightCorner(p,q);</code></td>
<td><code>matrix.topRightCorner&lt;p,q&gt;();</code></td>
</tr>
<tr>
<td>Bottom-right p by q block *</td>
<td><code>matrix.bottomRightCorner(p,q);</code></td>
<td><code>matrix.bottomRightCorner&lt;p,q&gt;();</code></td>
</tr>
<tr>
<td>Block containing the first q rows *</td>
<td><code>matrix.topRows(q);</code></td>
<td><code>matrix.topRows&lt;q&gt;();</code></td>
</tr>
<tr>
<td>Block containing the last q rows *</td>
<td><code>matrix.bottomRows(q);</code></td>
<td><code>matrix.bottomRows&lt;q&gt;();</code></td>
</tr>
<tr>
<td>Block containing the first p columns *</td>
<td><code>matrix.leftCols(p);</code></td>
<td><code>matrix.leftCols&lt;p&gt;();</code></td>
</tr>
<tr>
<td>Block containing the last q columns *</td>
<td><code>matrix.rightCols(q);</code></td>
<td><code>matrix.rightCols&lt;q&gt;();</code></td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  Eigen::Matrix4f m;
  m &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>,
       <span class="hljs-number">5</span>, <span class="hljs-number">6</span>, <span class="hljs-number">7</span>, <span class="hljs-number">8</span>,
       <span class="hljs-number">9</span>, <span class="hljs-number">10</span>,<span class="hljs-number">11</span>,<span class="hljs-number">12</span>,
       <span class="hljs-number">13</span>,<span class="hljs-number">14</span>,<span class="hljs-number">15</span>,<span class="hljs-number">16</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m.leftCols(2) ="</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; m.leftCols(<span class="hljs-number">2</span>) &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"m.bottomRows&lt;2&gt;() ="</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; m.bottomRows&lt;<span class="hljs-number">2</span>&gt;() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  m.topLeftCorner(<span class="hljs-number">1</span>,<span class="hljs-number">3</span>) = m.bottomRightCorner(<span class="hljs-number">3</span>,<span class="hljs-number">1</span>).transpose();
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"After assignment, m = "</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; m &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
m.leftCols(<span class="hljs-number">2</span>) =
 <span class="hljs-number">1</span>  <span class="hljs-number">2</span>
 <span class="hljs-number">5</span>  <span class="hljs-number">6</span>
 <span class="hljs-number">9</span> <span class="hljs-number">10</span>
<span class="hljs-number">13</span> <span class="hljs-number">14</span>

m.bottomRows&lt;<span class="hljs-number">2</span>&gt;() =
 <span class="hljs-number">9</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span>
<span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span> <span class="hljs-number">16</span>

After assignment, m =
 <span class="hljs-number">8</span> <span class="hljs-number">12</span> <span class="hljs-number">16</span>  <span class="hljs-number">4</span>
 <span class="hljs-number">5</span>  <span class="hljs-number">6</span>  <span class="hljs-number">7</span>  <span class="hljs-number">8</span>
 <span class="hljs-number">9</span> <span class="hljs-number">10</span> <span class="hljs-number">11</span> <span class="hljs-number">12</span>
<span class="hljs-number">13</span> <span class="hljs-number">14</span> <span class="hljs-number">15</span> <span class="hljs-number">16</span>
</div></code></pre>
<p><code>block operations</code>提供对vector进行整块数据的操作。</p>
<table>
<thead>
<tr>
<th>Block operation</th>
<th>Version constructing a dynamic-size block expression</th>
<th>Version constructing a fixed-size block expression</th>
</tr>
</thead>
<tbody>
<tr>
<td>Block containing the first n elements *</td>
<td>vector.head(n);</td>
<td><code>vector.head&lt;n&gt;();</code></td>
</tr>
<tr>
<td>Block containing the last n elements *</td>
<td>vector.tail(n);</td>
<td><code>vector.tail&lt;n&gt;();</code></td>
</tr>
<tr>
<td>Block containing n elements, starting at position i *</td>
<td>vector.segment(i,n);</td>
<td><code>vector.segment&lt;n&gt;(i);</code></td>
</tr>
</tbody>
</table>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span>
</span>{
  <span class="hljs-function">Eigen::ArrayXf <span class="hljs-title">v</span><span class="hljs-params">(<span class="hljs-number">6</span>)</span></span>;
  v &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>, <span class="hljs-number">6</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.head(3) ="</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v.head(<span class="hljs-number">3</span>) &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"v.tail&lt;3&gt;() = "</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v.tail&lt;<span class="hljs-number">3</span>&gt;() &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  v.segment(<span class="hljs-number">1</span>,<span class="hljs-number">4</span>) *= <span class="hljs-number">2</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"after 'v.segment(1,4) *= 2', v ="</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; v &lt;&lt; <span class="hljs-built_in">endl</span>;
}
=&gt;
v.head(<span class="hljs-number">3</span>) =
<span class="hljs-number">1</span>
<span class="hljs-number">2</span>
<span class="hljs-number">3</span>

v.tail&lt;<span class="hljs-number">3</span>&gt;() =
<span class="hljs-number">4</span>
<span class="hljs-number">5</span>
<span class="hljs-number">6</span>

after <span class="hljs-string">'v.segment(1,4) *= 2'</span>, v =
 <span class="hljs-number">1</span>
 <span class="hljs-number">4</span>
 <span class="hljs-number">6</span>
 <span class="hljs-number">8</span>
<span class="hljs-number">10</span>
 <span class="hljs-number">6</span>
</div></code></pre>
<h2 id="016-%E5%B8%B8%E7%94%A8%E5%87%BD%E6%95%B0">0.16. 常用函数</h2>
<h3 id="0161-%E6%9C%80%E5%B0%8F%E5%80%BC">0.16.1. 最小值</h3>
<ol>
<li>寻找矩阵中最小的值且得到该值的位置</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;eigen/Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span>

<span class="hljs-keyword">typedef</span> Eigen::Matrix&lt;<span class="hljs-keyword">double</span>, Dynamic, Dynamic&gt; MatrixD;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-function">MatrixD <span class="hljs-title">m1</span> <span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)</span></span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) {
      m1(i, j) = i + j + <span class="hljs-number">8</span>;
    }
  }
  m1(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; m1 &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-keyword">int</span> index1;
  <span class="hljs-keyword">int</span> index2;
  m1.minCoeff(&amp;index1, &amp;index2);
  <span class="hljs-built_in">cout</span> &lt;&lt; index1 &lt;&lt; <span class="hljs-string">" "</span> &lt;&lt; index2 &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
</div></code></pre>
<ol start="2">
<li>寻找矩阵中每一行的最小的值且得到该值的位置</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;eigen/Eigen/Dense&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;vector&gt;</span></span>

<span class="hljs-keyword">typedef</span> Eigen::Matrix&lt;<span class="hljs-keyword">double</span>, Dynamic, Dynamic&gt; MatrixD;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{
  <span class="hljs-function">MatrixD <span class="hljs-title">m1</span> <span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)</span></span>;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; <span class="hljs-number">4</span>; j++) {
      m1(i, j) = i + j + <span class="hljs-number">8</span>;
    }
  }
  m1(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>) = <span class="hljs-number">4</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; m1 &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-keyword">int</span> index1;
  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">4</span>; i++) {
    m1.row(i).minCoeff(&amp;index1);
    <span class="hljs-built_in">cout</span> &lt;&lt; index1 &lt;&lt; <span class="hljs-built_in">endl</span>;
  }
  <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}

</div></code></pre>
<h2 id="017-%E9%AB%98%E7%BA%A7%E6%A8%A1%E5%9D%97">0.17. 高级模块</h2>
<h3 id="0171-lu-%E5%88%86%E8%A7%A3">0.17.1. LU 分解</h3>
<p>通过调用<code>Eigen::FullPivLU&lt;&gt;</code>之后会得到一个矩阵，该矩阵将L矩阵和U矩阵共同存储在一个矩阵之中(具体请看下面的例子)。</p>
<pre class="hljs"><code><div><span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">double</span>, <span class="hljs-number">5</span>, <span class="hljs-number">3</span>&gt; Matrix5x3;
<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">double</span>, <span class="hljs-number">5</span>, <span class="hljs-number">5</span>&gt; Matrix5x5;
Matrix5x3 m = Matrix5x3::Random();
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the matrix m:"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; m &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-function">Eigen::FullPivLU&lt;Matrix5x3&gt; <span class="hljs-title">lu</span><span class="hljs-params">(m)</span></span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is, up to permutations, its LU decomposition matrix:"</span>
     &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; lu.matrixLU() &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the L part:"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
Matrix5x5 l = Matrix5x5::Identity();
l.block&lt;<span class="hljs-number">5</span>,<span class="hljs-number">3</span>&gt;(<span class="hljs-number">0</span>,<span class="hljs-number">0</span>).triangularView&lt;StrictlyLower&gt;() = lu.matrixLU();
<span class="hljs-built_in">cout</span> &lt;&lt; l &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Here is the U part:"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
Matrix5x3 u = lu.matrixLU().triangularView&lt;Upper&gt;();
<span class="hljs-built_in">cout</span> &lt;&lt; u &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"Let us now reconstruct the original matrix m:"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
<span class="hljs-built_in">cout</span> &lt;&lt; lu.permutationP().inverse() * l * u * lu.permutationQ().inverse() &lt;&lt; <span class="hljs-built_in">endl</span>;
=&gt;
Here is the matrix m:
   <span class="hljs-number">0.68</span>  <span class="hljs-number">-0.605</span> <span class="hljs-number">-0.0452</span>
 <span class="hljs-number">-0.211</span>   <span class="hljs-number">-0.33</span>   <span class="hljs-number">0.258</span>
  <span class="hljs-number">0.566</span>   <span class="hljs-number">0.536</span>   <span class="hljs-number">-0.27</span>
  <span class="hljs-number">0.597</span>  <span class="hljs-number">-0.444</span>  <span class="hljs-number">0.0268</span>
  <span class="hljs-number">0.823</span>   <span class="hljs-number">0.108</span>   <span class="hljs-number">0.904</span>
Here is, up to permutations, its LU decomposition matrix:
 <span class="hljs-number">0.904</span>  <span class="hljs-number">0.823</span>  <span class="hljs-number">0.108</span>
<span class="hljs-number">-0.299</span>  <span class="hljs-number">0.812</span>  <span class="hljs-number">0.569</span>
 <span class="hljs-number">-0.05</span>  <span class="hljs-number">0.888</span>   <span class="hljs-number">-1.1</span>
<span class="hljs-number">0.0296</span>  <span class="hljs-number">0.705</span>  <span class="hljs-number">0.768</span>
 <span class="hljs-number">0.285</span> <span class="hljs-number">-0.549</span> <span class="hljs-number">0.0436</span>
Here is the L part:
     <span class="hljs-number">1</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>
<span class="hljs-number">-0.299</span>      <span class="hljs-number">1</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>
 <span class="hljs-number">-0.05</span>  <span class="hljs-number">0.888</span>      <span class="hljs-number">1</span>      <span class="hljs-number">0</span>      <span class="hljs-number">0</span>
<span class="hljs-number">0.0296</span>  <span class="hljs-number">0.705</span>  <span class="hljs-number">0.768</span>      <span class="hljs-number">1</span>      <span class="hljs-number">0</span>
 <span class="hljs-number">0.285</span> <span class="hljs-number">-0.549</span> <span class="hljs-number">0.0436</span>      <span class="hljs-number">0</span>      <span class="hljs-number">1</span>
Here is the U part:
<span class="hljs-number">0.904</span> <span class="hljs-number">0.823</span> <span class="hljs-number">0.108</span>
    <span class="hljs-number">0</span> <span class="hljs-number">0.812</span> <span class="hljs-number">0.569</span>
    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>  <span class="hljs-number">-1.1</span>
    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>     <span class="hljs-number">0</span>
    <span class="hljs-number">0</span>     <span class="hljs-number">0</span>     <span class="hljs-number">0</span>
Let us now reconstruct the original matrix m:
   <span class="hljs-number">0.68</span>  <span class="hljs-number">-0.605</span> <span class="hljs-number">-0.0452</span>
 <span class="hljs-number">-0.211</span>   <span class="hljs-number">-0.33</span>   <span class="hljs-number">0.258</span>
  <span class="hljs-number">0.566</span>   <span class="hljs-number">0.536</span>   <span class="hljs-number">-0.27</span>
  <span class="hljs-number">0.597</span>  <span class="hljs-number">-0.444</span>  <span class="hljs-number">0.0268</span>
  <span class="hljs-number">0.823</span>   <span class="hljs-number">0.108</span>   <span class="hljs-number">0.904</span>
</div></code></pre>
<h3 id="0172-cholesky-%E5%88%86%E8%A7%A3">0.17.2. Cholesky 分解</h3>
<ol>
<li>标准的$LL^T$分解</li>
</ol>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Library/eigen/Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
  <span class="hljs-function">MatrixXd <span class="hljs-title">A</span><span class="hljs-params">(<span class="hljs-number">3</span>,<span class="hljs-number">3</span>)</span></span>;
  A &lt;&lt; <span class="hljs-number">4</span>,<span class="hljs-number">-1</span>,<span class="hljs-number">2</span>, <span class="hljs-number">-1</span>,<span class="hljs-number">6</span>,<span class="hljs-number">0</span>, <span class="hljs-number">2</span>,<span class="hljs-number">0</span>,<span class="hljs-number">5</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The matrix A is"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; A &lt;&lt; <span class="hljs-built_in">endl</span>;

  <span class="hljs-function">LLT&lt;MatrixXd&gt; <span class="hljs-title">lltOfA</span><span class="hljs-params">(A)</span></span>; <span class="hljs-comment">// compute the Cholesky decomposition of A</span>
  MatrixXd L = lltOfA.matrixL(); <span class="hljs-comment">// retrieve factor L  in the decomposition</span>
  <span class="hljs-comment">// The previous two lines can also be written as "L = A.llt().matrixL()"</span>

  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"The Cholesky factor L is"</span> &lt;&lt; <span class="hljs-built_in">endl</span> &lt;&lt; L &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"To check this, let us compute L * L.transpose()"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; L * L.transpose() &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"This should equal the matrix A"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;

}
</div></code></pre>
<h4 id="01721-%E5%88%A9%E7%94%A8cholesky%E5%88%86%E8%A7%A3%E6%B1%82%E8%A7%A3%E6%96%B9%E7%A8%8B">0.17.2.1. 利用Cholesky分解求解方程</h4>
<p>求解方程$Ax=b$,使用该方法默认矩阵$A$可逆。</p>
<p>例子1：</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Library/eigen/Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;
<span class="hljs-keyword">typedef</span> Matrix&lt;<span class="hljs-keyword">float</span>,Dynamic,<span class="hljs-number">2</span>&gt; DataMatrix;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
  <span class="hljs-comment">// let's generate some samples on the 3D plane of equation z = 2x+3y (with some noise)</span>
  DataMatrix samples = DataMatrix::Random(<span class="hljs-number">12</span>,<span class="hljs-number">2</span>);
  VectorXf elevations = <span class="hljs-number">2</span>*samples.col(<span class="hljs-number">0</span>) + <span class="hljs-number">3</span>*samples.col(<span class="hljs-number">1</span>) + VectorXf::Random(<span class="hljs-number">12</span>)*<span class="hljs-number">0.1</span>;
  <span class="hljs-comment">// and let's solve samples * [x y]^T = elevations in least square sense:</span>
  Matrix&lt;<span class="hljs-keyword">float</span>,<span class="hljs-number">2</span>,<span class="hljs-number">1</span>&gt; xy
    = (samples.adjoint() * samples).llt().solve((samples.adjoint()*elevations));
  <span class="hljs-built_in">cout</span> &lt;&lt; xy &lt;&lt; <span class="hljs-built_in">endl</span>;
}
</div></code></pre>
<p>例子2：</p>
<pre class="hljs"><code><div><span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;iostream&gt;</span></span>
<span class="hljs-meta">#<span class="hljs-meta-keyword">include</span> <span class="hljs-meta-string">&lt;Library/eigen/Eigen/Dense&gt;</span></span>

<span class="hljs-keyword">using</span> Eigen::Dynamic;
<span class="hljs-keyword">typedef</span> Eigen::Matrix&lt;<span class="hljs-keyword">double</span>, Dynamic, Dynamic&gt; MatrixD;
<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> Eigen;

<span class="hljs-keyword">using</span> <span class="hljs-keyword">namespace</span> <span class="hljs-built_in">std</span>;
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span></span>{
  <span class="hljs-function">MatrixD <span class="hljs-title">A</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">4</span>)</span></span>;
  A &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">1</span>;
  <span class="hljs-function">MatrixD <span class="hljs-title">x</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>)</span></span>;
  <span class="hljs-function">MatrixD <span class="hljs-title">b</span><span class="hljs-params">(<span class="hljs-number">4</span>, <span class="hljs-number">1</span>)</span></span>;
  b &lt;&lt; <span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>;
  <span class="hljs-comment">// LLT&lt;MatrixD&gt; llt;</span>
  <span class="hljs-comment">// llt.compute(A.adjoint() * A);</span>
  <span class="hljs-comment">// x = llt.solve(A.adjoint() * b);</span>
  x = (A.adjoint() * A).llt().solve(A.adjoint() * b);
  <span class="hljs-built_in">cout</span> &lt;&lt; A &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"-------------"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; b &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; <span class="hljs-string">"---------------"</span> &lt;&lt; <span class="hljs-built_in">endl</span>;
  <span class="hljs-built_in">cout</span> &lt;&lt; x;
</div></code></pre>
<h2 id="018-%E7%89%B9%E6%AE%8A%E9%97%AE%E9%A2%98">0.18. 特殊问题</h2>
<ol>
<li>
<p>将fixed的vector或matrix作为类的内部成员变量需要使用宏<code> EIGEN_MAKE_ALIGNED_OPERATOR_NEW</code></p>
<pre class="hljs"><code><div><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Foo</span>
{</span>
    ...
    Eigen::Vector2d v;
    ...
    <span class="hljs-keyword">public</span>:
    EIGEN_MAKE_ALIGNED_OPERATOR_NEW
};

 Foo *foo = <span class="hljs-keyword">new</span> Foo;
</div></code></pre>
</li>
</ol>

</body>
</html>
