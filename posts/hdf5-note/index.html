<!DOCTYPE html>
<html lang="zh-CN">
    <head prefix="og: http://ogp.me/ns# article: http://ogp.me/ns/article#">
    <meta charset="UTF-8" />

    <meta name="generator" content="Hugo 0.68.3" /><meta name="theme-color" content="#fff" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    
    <meta name="format-detection" content="telephone=no, date=no, address=no, email=no" />
    
    <meta http-equiv="Cache-Control" content="no-transform" />
    
    <meta http-equiv="Cache-Control" content="no-siteapp" />

    <title>HDF5 Note | liudy</title>

    <link rel="stylesheet" href="/css/meme.min.ee60e170cedf90d86c927787e2597360b59802242e3845a7d04834f4b534af2b.css" integrity="sha256-7mDhcM7fkNhskneH4llzYLWYAiQuOEWn0Eg09LU0rys=" />

    
    
        <script src="/js/meme.min.434274bb2302fe029f98d3d29ae57dab1566be565436f52a6dd93089085533c4.js" integrity="sha256-Q0J0uyMC/gKfmNPSmuV9qxVmvlZUNvUqbdkwiQhVM8Q="></script>

    

    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />

        <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" media="print" onload="this.media='all'" />
        <noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=EB&#43;Garamond:ital,wght@0,400;0,500;0,700;1,400;1,700&amp;family=Noto&#43;Serif&#43;SC:wght@400;500;700&amp;family=Source&#43;Code&#43;Pro:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" /></noscript>

    <meta name="author" content="liudy" /><meta name="description" content="This Note is about HDF5." />

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#2a6df4" />
    <link rel="apple-touch-icon" sizes="180x180" href="/icons/apple-touch-icon.png" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-title" content="liudy" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="application-name" content="liudy" />
    <meta name="msapplication-starturl" content="../../" />
    <meta name="msapplication-TileColor" content="#fff" />
    <meta name="msapplication-TileImage" content="../../icons/mstile-150x150.png" />
    <link rel="manifest" href="/manifest.json" />

    
    

    
    <link rel="canonical" href="https://liudyboy.github.io/posts/hdf5-note/" />
    

<script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BlogPosting",
        "datePublished": "2020-11-12T16:55:49+08:00",
        "dateModified": "2021-03-12T09:28:14+08:00",
        "url": "https://liudyboy.github.io/posts/hdf5-note/",
        "headline": "HDF5 Note",
        "description": "This Note is about HDF5.",
        "inLanguage" : "zh-CN",
        "articleSection": "posts",
        "wordCount":  5462 ,
        "image": ["https://liudyboy.github.io/imgs/typesss.png","https://liudyboy.github.io/imgs/layoutdatas.png","https://liudyboy.github.io/imgs/hyberslab.png","https://liudyboy.github.io/imgs/hywitada.png","https://liudyboy.github.io/imgs/complatehyp.png","https://liudyboy.github.io/imgs/discomm.png","https://liudyboy.github.io/imgs/pointslecetions.png","https://liudyboy.github.io/imgs/exampleexo.png","https://liudyboy.github.io/imgs/fiwitaer.png","https://liudyboy.github.io/imgs/uniontrans.png","https://liudyboy.github.io/imgs/wirtespaearpaf.png","https://liudyboy.github.io/imgs/querytbg.png"],
        "author": {
            "@type": "Person",
            "description": "Viva La Vida",
            "email": "liudy95@126.com",
            "image": "https://liudyboy.github.io/icons/apple-touch-icon.png",
            "url": "https://liudyboy.github.io/",
            "name": "liudy"
        },
        "license": "[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh)",
        "publisher": {
            "@type": "Organization",
            "name": "liudy",
            "logo": {
                "@type": "ImageObject",
                "url": "https://liudyboy.github.io/icons/apple-touch-icon.png"
            },
            "url": "https://liudyboy.github.io/"
        },
        "mainEntityOfPage": {
            "@type": "WebSite",
            "@id": "https://liudyboy.github.io/"
        }
    }
</script>

    

<meta name="twitter:card" content="summary_large_image" />



    



<meta property="og:title" content="HDF5 Note" />
<meta property="og:description" content="This Note is about HDF5." />
<meta property="og:url" content="https://liudyboy.github.io/posts/hdf5-note/" />
<meta property="og:site_name" content="liudy" />
<meta property="og:locale" content="zh" /><meta property="og:image" content="https://liudyboy.github.io/imgs/typesss.png" />
<meta property="og:type" content="article" />
    <meta property="article:published_time" content="2020-11-12T16:55:49&#43;08:00" />
    <meta property="article:modified_time" content="2021-03-12T09:28:14&#43;08:00" />
    
    <meta property="article:section" content="posts" />



     <script type="text/javascript"
        async
        src="https://cdn.bootcss.com/mathjax/2.7.3/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
 MathJax.Hub.Config({
     tex2jax: {
         inlineMath: [['$','$'], ['\\(','\\)']],
         displayMath: [['$$','$$'], ['\[\[','\]\]']],
         processEscapes: true,
         processEnvironments: true,
         skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
         TeX: { equationNumbers: { autoNumber: "AMS" },
                extensions: ["AMSmath.js", "AMSsymbols.js"] }
     }
 });

 MathJax.Hub.Queue(function() {
     
     
     
     var all = MathJax.Hub.getAllJax(), i;
     for(i = 0; i < all.length; i += 1) {
         all[i].SourceElement().parentNode.className += ' has-jax';
     }
 });

</script>

<style>
 code.has-jax {
     font: inherit;
     font-size: 100%;
     background: inherit;
     border: inherit;
     color: #515151;
 }
</style>


   
</head>

    <body>
        <div class="container">
            
    <header class="header" data-scroll-header>
        
            <div class="header-wrapper">
                <div class="header-inner single">
                    
    <div class="site-brand">
        
            <a href="/" class="brand">liudy</a>
        
    </div>

                    <nav class="nav">
    <ul class="menu" id="menu">
        
            
        
        
        
        
            
                <li class="menu-item active"><a href="/posts/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon archive"><path d="M32 448c0 17.7 14.3 32 32 32h384c17.7 0 32-14.3 32-32V160H32v288zm160-212c0-6.6 5.4-12 12-12h104c6.6 0 12 5.4 12 12v8c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-8zM480 32H32C14.3 32 0 46.3 0 64v48c0 8.8 7.2 16 16 16h480c8.8 0 16-7.2 16-16V64c0-17.7-14.3-32-32-32z"/></svg><span class="menu-item-name">文章</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/categories/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon th"><path d="M149.333 56v80c0 13.255-10.745 24-24 24H24c-13.255 0-24-10.745-24-24V56c0-13.255 10.745-24 24-24h101.333c13.255 0 24 10.745 24 24zm181.334 240v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm32-240v80c0 13.255 10.745 24 24 24H488c13.255 0 24-10.745 24-24V56c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24zm-32 80V56c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.256 0 24.001-10.745 24.001-24zm-205.334 56H24c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24zM0 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H24c-13.255 0-24 10.745-24 24zm386.667-56H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zm0 160H488c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H386.667c-13.255 0-24 10.745-24 24v80c0 13.255 10.745 24 24 24zM181.333 376v80c0 13.255 10.745 24 24 24h101.333c13.255 0 24-10.745 24-24v-80c0-13.255-10.745-24-24-24H205.333c-13.255 0-24 10.745-24 24z"/></svg><span class="menu-item-name">分类</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/tags/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" class="icon tags"><path d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"/></svg><span class="menu-item-name">标签</span></a>
                </li>
            
        
            
                <li class="menu-item"><a href="/about/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512" class="icon user-circle"><path d="M248 8C111 8 0 119 0 256s111 248 248 248 248-111 248-248S385 8 248 8zm0 96c48.6 0 88 39.4 88 88s-39.4 88-88 88-88-39.4-88-88 39.4-88 88-88zm0 344c-58.7 0-111.3-26.6-146.5-68.2 18.8-35.4 55.6-59.8 98.5-59.8 2.4 0 4.8.4 7.1 1.1 13 4.2 26.6 6.9 40.9 6.9 14.3 0 28-2.7 40.9-6.9 2.3-.7 4.7-1.1 7.1-1.1 42.9 0 79.7 24.4 98.5 59.8C359.3 421.4 306.7 448 248 448z"/></svg><span class="menu-item-name">关于</span></a>
                </li>
            
        
            
                
                    
                    
                        <li class="menu-item">
                            <a id="theme-switcher" href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-light"><path d="M193.2 104.5l48.8-97.5a18 18 0 0128 0l48.8 97.5 103.4 -34.5a18 18 0 0119.8 19.8l-34.5 103.4l97.5 48.8a18 18 0 010 28l-97.5 48.8 34.5 103.4a18 18 0 01-19.8 19.8l-103.4-34.5-48.8 97.5a18 18 0 01-28 0l-48.8-97.5l-103.4 34.5a18 18 0 01-19.8-19.8l34.5-103.4-97.5-48.8a18 18 0 010-28l97.5-48.8-34.5-103.4a18 18 0 0119.8-19.8zM256 128a128 128 0 10.01 0M256 160a96 96 0 10.01 0"/></svg><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon theme-icon-dark"><path d="M27 412a256 256 0 10154-407a11.5 11.5 0 00-5 20a201.5 201.5 0 01-134 374a11.5 11.5 0 00-15 13"/></svg></a>
                        </li>
                    
                
            
        
    </ul>
</nav>

                    
                </div>
            </div>
            
    <input type="checkbox" id="nav-toggle" aria-hidden="true" />
    <label for="nav-toggle" class="nav-toggle"></label>
    <label for="nav-toggle" class="nav-curtain"></label>


        
    </header>




            
            
    <main class="main single" id="main">
    <div class="main-inner">

        

        <article class="content post" data-align="justify" data-type="posts" data-toc-num="true">

            <h1 class="post-title">HDF5 Note</h1>

            

            
                <div class="post-description">This Note is about HDF5.</div>
                
            

            
                

<div class="post-meta">
    
        
        <time datetime="2020-11-12T16:55:49&#43;08:00" class="post-meta-item published"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M148 288h-40c-6.6 0-12-5.4-12-12v-40c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12zm108-12v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 96v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm-96 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm192 0v-40c0-6.6-5.4-12-12-12h-40c-6.6 0-12 5.4-12 12v40c0 6.6 5.4 12 12 12h40c6.6 0 12-5.4 12-12zm96-260v352c0 26.5-21.5 48-48 48H48c-26.5 0-48-21.5-48-48V112c0-26.5 21.5-48 48-48h48V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h128V12c0-6.6 5.4-12 12-12h40c6.6 0 12 5.4 12 12v52h48c26.5 0 48 21.5 48 48zm-48 346V160H48v298c0 3.3 2.7 6 6 6h340c3.3 0 6-2.7 6-6z"/></svg>&nbsp;2020.11.12</time>
    
    
        
        <time datetime="2021-03-12T09:28:14&#43;08:00" class="post-meta-item modified"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon post-meta-icon"><path d="M400 64h-48V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H160V12c0-6.627-5.373-12-12-12h-40c-6.627 0-12 5.373-12 12v52H48C21.49 64 0 85.49 0 112v352c0 26.51 21.49 48 48 48h352c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm-6 400H54a6 6 0 0 1-6-6V160h352v298a6 6 0 0 1-6 6zm-52.849-200.65L198.842 404.519c-4.705 4.667-12.303 4.637-16.971-.068l-75.091-75.699c-4.667-4.705-4.637-12.303.068-16.971l22.719-22.536c4.705-4.667 12.303-4.637 16.97.069l44.104 44.461 111.072-110.181c4.705-4.667 12.303-4.637 16.971.068l22.536 22.718c4.667 4.705 4.636 12.303-.069 16.97z"/></svg>&nbsp;2021.3.12</time>
    
    
    
        
        
        
            
                <span class="post-meta-item category"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M464 128H272l-54.63-54.63c-6-6-14.14-9.37-22.63-9.37H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V176c0-26.51-21.49-48-48-48zm0 272H48V112h140.12l54.63 54.63c6 6 14.14 9.37 22.63 9.37H464v224z"/></svg>&nbsp;<a href="/categories/%E7%BC%96%E7%A8%8B/" class="category-link">编程</a></span>
            
        
    
    
        
        <span class="post-meta-item wordcount"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M497.9 142.1l-46.1 46.1c-4.7 4.7-12.3 4.7-17 0l-111-111c-4.7-4.7-4.7-12.3 0-17l46.1-46.1c18.7-18.7 49.1-18.7 67.9 0l60.1 60.1c18.8 18.7 18.8 49.1 0 67.9zM284.2 99.8L21.6 362.4.4 483.9c-2.9 16.4 11.4 30.6 27.8 27.8l121.5-21.3 262.6-262.6c4.7-4.7 4.7-12.3 0-17l-111-111c-4.8-4.7-12.4-4.7-17.1 0zM124.1 339.9c-5.5-5.5-5.5-14.3 0-19.8l154-154c5.5-5.5 14.3-5.5 19.8 0s5.5 14.3 0 19.8l-154 154c-5.5 5.5-14.3 5.5-19.8 0zM88 424h48v36.3l-64.5 11.3-31.1-31.1L51.7 376H88v48z"/></svg>&nbsp;5462</span>
    
    
        
        <span class="post-meta-item reading-time"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon post-meta-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm0 448c-110.5 0-200-89.5-200-200S145.5 56 256 56s200 89.5 200 200-89.5 200-200 200zm61.8-104.4l-84.9-61.7c-3.1-2.3-4.9-5.9-4.9-9.7V116c0-6.6 5.4-12 12-12h32c6.6 0 12 5.4 12 12v141.7l66.8 48.6c5.4 3.9 6.5 11.4 2.6 16.8L334.6 349c-3.9 5.3-11.4 6.5-16.8 2.6z"/></svg>&nbsp;11&nbsp;分钟</span>
    
    
        
            
            <span class="post-meta-item busuanzi-page-pv" id="busuanzi_container_page_pv"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512" class="icon post-meta-icon"><path d="M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"/></svg>&nbsp;<span id="busuanzi_value_page_pv"></span></span>
        
    
    
</div>

            

            <nav class="contents">
  <h2 id="contents" class="contents-title">目录</h2><ol class="toc">
    <li><a href="#basis">Basis</a>
      <ol>
        <li><a href="#the-abstract-data-model">The Abstract Data Model</a></li>
        <li><a href="#file-contents">File Contents</a></li>
        <li><a href="#creating-a-dataset">Creating a Dataset</a>
          <ol>
            <li><a href="#datatypes">Datatypes</a></li>
            <li><a href="#datasets-and-dataspaces">Datasets and Dataspaces</a>
              <ol>
                <li><a href="#rearranging-data"><strong>Rearranging data</strong></a></li>
                <li><a href="#data-selection"><strong>Data Selection</strong></a>
                  <ol>
                    <li><a href="#hyperslab-selection">Hyperslab Selection</a></li>
                    <li><a href="#select-points">Select Points</a></li>
                  </ol>
                </li>
              </ol>
            </li>
            <li><a href="#property-lists">Property Lists</a></li>
            <li><a href="#programming-examples">Programming Examples</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#hdf5-file">HDF5 File</a>
      <ol>
        <li><a href="#file-access-modes">File Access Modes</a></li>
        <li><a href="#programming-model-for-files">Programming Model for Files</a>
          <ol>
            <li><a href="#creating-a-new-file">Creating a New File</a></li>
            <li><a href="#open-a-file">Open a file</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#hdf5-groups">HDF5 Groups</a>
      <ol>
        <li><a href="#programming-model-for-groups">Programming Model for Groups</a>
          <ol>
            <li><a href="#creating-a-group">Creating a Group</a></li>
            <li><a href="#opening-a-group-and-accessing-an-object-in-that-group">Opening a Group and Accessing an Object in that Group</a></li>
            <li><a href="#creating-a-dataset-in-a-specific-group">Creating a Dataset in a Specific Group</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#hdf5-datasets">HDF5 Datasets</a>
      <ol>
        <li><a href="#programming-model-for-datasets">Programming Model for Datasets</a>
          <ol>
            <li><a href="#create-dataset">Create Dataset</a></li>
            <li><a href="#data-transfer-operations-on-a-dataset">Data Transfer Operations on a Dataset</a>
              <ol>
                <li><a href="#example">example</a></li>
              </ol>
            </li>
            <li><a href="#retrieve-the-properties-of-a-dataset">Retrieve the Properties of a Dataset</a></li>
          </ol>
        </li>
      </ol>
    </li>
    <li><a href="#hdf5-attributes">HDF5 Attributes</a></li>
    <li><a href="#chunking-in-hdf5">Chunking in HDF5</a></li>
    <li><a href="#parallel-io-examples">Parallel IO Examples</a>
      <ol>
        <li><a href="#example-1-parallel-write">example 1: parallel write</a></li>
        <li><a href="#example-2-parallel-read">example 2: parallel read</a></li>
      </ol>
    </li>
    <li><a href="#useful-examples">Useful Examples</a>
      <ol>
        <li><a href="#example-1-write-all">example 1: Write all</a></li>
        <li><a href="#example-2-read-all">example 2: read all</a></li>
        <li><a href="#example-3-extend-dataset">example 3: Extend dataset</a></li>
        <li><a href="#example-4-create-and-extend-an-unlimited-dataset">example 4: create and extend an unlimited dataset</a></li>
        <li><a href="#example-5-write-with-increase-dataset">example 5: write with increase dataset</a></li>
      </ol>
    </li>
    <li><a href="#example-6-append-to-a-file">example 6: Append to a file</a></li>
    <li><a href="#reference">Reference</a></li>
  </ol>
</nav><div class="post-body">
              <h2 id="basis"><a href="#basis" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Basis</h2>
<h3 id="the-abstract-data-model"><a href="#the-abstract-data-model" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>The Abstract Data Model</h3>
<ul>
<li>The key concepts include:</li>
<li>File - a contiguous string of bytes in a computer store (memory, disk, etc.), and the bytes represent zero or more objects of the model</li>
<li>Group - a collection of objects (including groups)</li>
<li>Dataset - a multidimensional array of data elements with attributes and other metadata</li>
<li>Dataspace - a description of the dimensions of a multidimensional array</li>
<li>Datatype - a description of a specific class of data element including its storage layout as a pattern of bits</li>
<li>Attribute - a named data value associated with a group, dataset, or named datatype</li>
<li>Property List - a collection of parameters (some permanent and some transient) controlling options in the library</li>
<li>Link - the way objects are connected</li>
</ul>
<h3 id="file-contents"><a href="#file-contents" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>File Contents</h3>
<p>We can view the HDF5 file contents, simply type:</p>
<p><code>h5dump &lt;filename&gt;</code></p>
<h3 id="creating-a-dataset"><a href="#creating-a-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Creating a Dataset</h3>
<h4 id="datatypes"><a href="#datatypes" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Datatypes</h4>
<p>There are two categories of datatypes in HDF5:</p>
<ul>
<li>
<p>Pre-defined: These datatypes are opened and closed by HDF5.</p>
<p>Pre-defined datatypes can be atomic or composite:</p>
<ul>
<li>Atomic datatypes cannot be decomposed into smaller datatype units at the API level. For example: integer, float, reference, string.</li>
<li>Composite datatypes are aggregations of one or more datatypes. For example: array, variable length, enumeration, compound.</li>
</ul>
</li>
<li>
<p>Derived: These datatypes are created or derived from the pre-defined types.</p>
</li>
</ul>
<p>HDF5 predefined native datatypes</p>
<p><img src="/imgs/typesss.png" alt=""></p>
<h4 id="datasets-and-dataspaces"><a href="#datasets-and-dataspaces" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Datasets and Dataspaces</h4>
<p>A dataspace describes the dimensionality of the data array. A dataspace is either a regular N- dimensional array of data points, called a simple dataspace, or a more general collection of data points organized in another manner, called a complex dataspace.</p>
<ol>
<li><strong>Creating a Simple Dataspace</strong></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span><span class="lnt">9
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">space_id</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">hsize_t</span> <span class="n">current_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">};</span>
<span class="n">hsize_t</span> <span class="n">max_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">30</span><span class="p">,</span> <span class="n">H5S_UNLIMITED</span><span class="p">};</span>
<span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
<span class="n">space_id</span> <span class="o">=</span> <span class="n">H5Screate</span><span class="p">(</span><span class="n">H5S_SIMPLE</span><span class="p">);</span>
<span class="n">H5Sset_extent_simple</span><span class="p">(</span><span class="n">space_id</span><span class="p">,</span><span class="n">rank</span><span class="p">,</span><span class="n">current_dims</span><span class="p">,</span><span class="n">max_dims</span><span class="p">);</span>
<span class="c1">// space_id = H5Screate_simple(rank, current_dims, max_dims);
</span><span class="c1">// space_id = H5Screate_simple(rank, current_dims, NULL);  maximum size of all dimensions are the same as the curent sizes
</span></code></pre></td></tr></table></div>
</div>
</div><ol start="2">
<li><strong>Creating a Null Dataspace</strong></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">space_id</span><span class="p">;</span>
<span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
<span class="n">space_id</span> <span class="o">=</span> <span class="n">H5Screate</span><span class="p">(</span><span class="n">H5S_NULL</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="3">
<li><strong>Creating a Scalar Dataspace</strong></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">space_id</span><span class="p">;</span>
<span class="p">.</span> <span class="p">.</span> <span class="p">.</span>
<span class="n">space_id</span> <span class="o">=</span> <span class="n">H5Screate</span><span class="p">(</span><span class="n">H5S_SCALAR</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="4">
<li><strong>Finding Dataspace Characteristics</strong></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">space_id</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">rank</span><span class="p">;</span>
<span class="n">hsize_t</span> <span class="o">*</span><span class="n">current_dims</span><span class="p">;</span>
<span class="n">hsize_t</span> <span class="o">*</span><span class="n">max_dims</span><span class="p">;</span>
<span class="o">---------</span>
<span class="n">rank</span><span class="o">=</span><span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">space_id</span><span class="p">);</span>
<span class="p">(</span><span class="n">or</span> <span class="n">rank</span><span class="o">=</span><span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">space_id</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);)</span>
<span class="n">current_dims</span><span class="o">=</span> <span class="p">(</span><span class="n">hsize_t</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
<span class="n">max_dims</span><span class="o">=</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
<span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">space_id</span><span class="p">,</span> <span class="n">current_dims</span><span class="p">,</span> <span class="n">max_dims</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h5 id="rearranging-data"><a href="#rearranging-data" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><strong>Rearranging data</strong></h5>
<p>During a read operation, the array will be read into the different shape in memory, and during a write operation, the array will be written to the file in the shape specified by the dataspace in the file.
<img src="/imgs/layoutdatas.png" alt=""></p>
<h5 id="data-selection"><a href="#data-selection" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a><strong>Data Selection</strong></h5>
<p>This can be used to implement partial I/O, including:</p>
<ul>
<li><strong>Sub-setting</strong> - reading part of a large dataset</li>
<li><strong>Sampling</strong> - reading selected elements (for example, every second element) of a dataset</li>
<li><strong>Scatter-gather</strong> - read non-contiguous elements into contiguous locations (gather) or read contiguous elements into non-contiguous locations (scatter) or both</li>
</ul>
<p>To use selections, the following steps are followed:</p>
<ol>
<li>Get or define the dataspace for the source and destination</li>
<li>Specify one or more selections for source and destination dataspaces</li>
<li>Transfer data using the dataspaces with selections</li>
</ol>
<p>There are two forms of selection, hyperslab and point.</p>
<h6 id="hyperslab-selection"><a href="#hyperslab-selection" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Hyperslab Selection</h6>
<p>A hyperslab is a selection of elements from a hyper rectangle.</p>
<p><img src="/imgs/hyberslab.png" alt="">
<img src="/imgs/hywitada.png" alt="">
<img src="/imgs/complatehyp.png" alt="">
<img src="/imgs/discomm.png" alt=""></p>
<h6 id="select-points"><a href="#select-points" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Select Points</h6>
<p>The second type of selection is an array of points such as coordinates.
<img src="/imgs/pointslecetions.png" alt=""></p>
<ol>
<li>example 1
<img src="/imgs/exampleexo.png" alt=""></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">// Selecting a hyperslab
</span><span class="c1"></span><span class="o">*</span> <span class="n">get</span> <span class="n">the</span> <span class="n">file</span> <span class="n">dataspace</span><span class="p">.</span>
<span class="err">*/</span>
<span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span> <span class="cm">/* dataspace */</span>
<span class="cm">/* identifier */</span>
<span class="cm">/*
</span><span class="cm">* Define hyperslab in the dataset.
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">dataspace</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>


<span class="c1">// Defining the destination memory
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">* Define memory dataspace.
</span><span class="cm">*/</span>
<span class="n">dimsm</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">7</span><span class="p">;</span>
<span class="n">dimsm</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">dimsm</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">memspace</span>  <span class="o">=</span>  <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span><span class="n">dimsm</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Define memory hyperslab.
</span><span class="cm">*/</span>
<span class="n">offset_out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">offset_out</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
<span class="n">offset_out</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">0</span><span class="p">;</span>
<span class="n">count_out</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span>  <span class="mi">3</span><span class="p">;</span>
<span class="n">count_out</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">count_out</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">memspace</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset_out</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">count_out</span><span class="p">,</span>
<span class="nb">NULL</span><span class="p">);</span>

<span class="c1">// read
</span><span class="c1"></span><span class="n">ret</span> <span class="o">=</span> <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">memspace</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="2">
<li>example 2
<img src="/imgs/fiwitaer.png" alt=""></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cm">/* Select hyperslab for the dataset in the file, using
</span><span class="cm">* 3 x 2 blocks, (4,3) stride (2,4) count starting at
</span><span class="cm">* the position (0,1).
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Create dataspace for the first dataset.
</span><span class="cm">*/</span>
<span class="n">mid1</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">MSPACE1_RANK</span><span class="p">,</span> <span class="n">dim1</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Select hyperslab.
</span><span class="cm">* We will use 48 elements of the vector buffer starting
</span><span class="cm">* at the second element. Selected elements are
</span><span class="cm">* 1 2 3 . . . 48
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">48</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">mid1</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Write selection from the vector buffer to the dataset
</span><span class="cm">* in the file.
</span><span class="cm">*/</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">midd1</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">vector</span><span class="p">);</span>

</code></pre></td></tr></table></div>
</div>
</div><ol start="3">
<li>example 3
<img src="/imgs/uniontrans.png" alt=""></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="c1">//  Select source hyperslabs
</span><span class="c1"></span><span class="n">fid</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Select first hyperslab for the dataset in the file.
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Add second selected hyperslab to the selection.
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">H5S_SELECT_OR</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>

<span class="c1">//  Select destination hyperslabs
</span><span class="c1"></span><span class="cm">/*
</span><span class="cm">* Create memory dataspace.
</span><span class="cm">*/</span>
<span class="n">mid</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">MSPACE_RANK</span><span class="p">,</span> <span class="n">mdim</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Select two hyperslabs in memory. Hyperslabs has the
</span><span class="cm">* same size and shape as the selected hyperslabs for
</span><span class="cm">* the file dataspace.
</span><span class="cm">*/</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
<span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
<span class="n">block</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">block</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">mid</span><span class="p">,</span> <span class="n">H5S_SELECT_OR</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="n">block</span><span class="p">);</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">mid</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">matrix_out</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="4">
<li>example 4
<img src="/imgs/wirtespaearpaf.png" alt=""></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hsize_t</span> <span class="n">dim2</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">4</span><span class="p">};</span>
<span class="kt">int</span> <span class="n">values</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">53</span><span class="p">,</span> <span class="mi">59</span><span class="p">,</span> <span class="mi">61</span><span class="p">,</span> <span class="mi">67</span><span class="p">};</span>
<span class="cm">/* Array to store selected points from the
</span><span class="cm">* file dataspace
</span><span class="cm">*/</span>
<span class="n">hssize_t</span> <span class="n">coord</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">2</span><span class="p">];</span>
<span class="cm">/*
</span><span class="cm">* Create dataspace for the second dataset.
</span><span class="cm">*/</span>
<span class="n">mid2</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">dim2</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Select sequence of NPOINTS
</span><span class="cm"> points in the file
</span><span class="cm">* dataspace.
</span><span class="cm">*/</span>
<span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="n">coord</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="n">coord</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="n">coord</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span> <span class="n">coord</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Sselect_elements</span><span class="p">(</span><span class="n">fid</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">NPOINTS</span><span class="p">,</span> <span class="p">(</span><span class="k">const</span> <span class="n">hssize_t</span> <span class="o">**</span><span class="p">)</span><span class="n">coord</span><span class="p">);</span>
<span class="n">ret</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">mid2</span><span class="p">,</span> <span class="n">fid</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">values</span><span class="p">);</span>

</code></pre></td></tr></table></div>
</div>
</div><h4 id="property-lists"><a href="#property-lists" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Property Lists</h4>
<p>Property lists are a mechanism for modifying the default behavior when creating or accessing objects.
Property lists are information relevant to the behavior of the library while attributes are relevant to the user’s data and application.</p>
<h4 id="programming-examples"><a href="#programming-examples" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Programming Examples</h4>
<ol>
<li>Create a file</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span>
 <span class="n">file</span><span class="p">;</span>
 <span class="cm">/* declare file identifier */</span>
<span class="cm">/*
</span><span class="cm">* Create a new file using H5F_ACC_TRUNC to truncate and overwrite
</span><span class="cm">* any file of the same name, default file creation properties, and
</span><span class="cm">* default file access properties. Then close the file.
</span><span class="cm">*/</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">H5Fcreate</span><span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&#34;hdf5.h&#34;</span><span class="cp">
</span><span class="cp">#define FILE &#34;dset.h5&#34;
</span><span class="cp"></span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">hid_t</span>       <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="n">dataspace_id</span><span class="p">;</span>  <span class="cm">/* identifiers */</span>
  <span class="n">hsize_t</span>     <span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">herr_t</span>      <span class="n">status</span><span class="p">;</span>

  <span class="cm">/* Create a new file using default properties. */</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fcreate</span><span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

  <span class="cm">/* Create the data space for the dataset. */</span>
  <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span>
  <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
  <span class="n">dataspace_id</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="cm">/* Create the dataset. */</span>
  <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dcreate2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">H5T_STD_I32BE</span><span class="p">,</span> <span class="n">dataspace_id</span><span class="p">,</span>
                          <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

  <span class="cm">/* End access to the dataset and release resources used by it. */</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>

  <span class="cm">/* Terminate access to the data space. */</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace_id</span><span class="p">);</span>

  <span class="cm">/* Close the file. */</span>
  <span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="2">
<li>Creating and Initializing a Dataset</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span>
 <span class="n">dataset</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">;</span>
 <span class="cm">/* declare identifiers */</span>
<span class="cm">/*
</span><span class="cm">* Create a dataspace: Describe the size of the array and
</span><span class="cm">* create the dataspace for a fixed-size dataset.
</span><span class="cm">*/</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">NX</span><span class="p">;</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">NY</span><span class="p">;</span>
<span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">RANK</span><span class="p">,</span> <span class="n">dimsf</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Define a datatype for the data in the dataset.
</span><span class="cm">* We will store little endian integers.
</span><span class="cm">*/</span>
<span class="n">datatype</span> <span class="o">=</span> <span class="n">H5Tcopy</span><span class="p">(</span><span class="n">H5T_NATIVE_INT</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Tset_order</span><span class="p">(</span><span class="n">datatype</span><span class="p">,</span> <span class="n">H5T_ORDER_LE</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Create a new dataset within the file using the defined
</span><span class="cm">* dataspace and datatype and default dataset creation
</span><span class="cm">* properties.
</span><span class="cm">* NOTE: H5T_NATIVE_INT can be used as the datatype if
</span><span class="cm">* conversion to little endian is not needed.
</span><span class="cm">*/</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">DATASETNAME</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span>
<span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="4">
<li>Closing a object</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">H5Tclose</span><span class="p">(</span><span class="n">datatype</span><span class="p">);</span>
<span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
<span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="5">
<li>Writing or Read a Dataset to or from a File</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cm">/*
</span><span class="cm">* Write the data to the dataset using default transfer properties.
</span><span class="cm">*/</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="6">
<li>Declaring a dataspace with unlimited dimensions</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cm">/* dataset dimensions at creation time */</span>
<span class="n">Hsize_t</span> <span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">};</span>
<span class="n">hsize_t</span> <span class="n">maxdims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">H5S_UNLIMITED</span><span class="p">,</span> <span class="n">H5S_UNLIMITED</span><span class="p">};</span>
<span class="cm">/*
</span><span class="cm">* Create the data space with unlimited dimensions.
</span><span class="cm">*/</span>
<span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">RANK</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">maxdims</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="hdf5-file"><a href="#hdf5-file" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>HDF5 File</h2>
<h3 id="file-access-modes"><a href="#file-access-modes" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>File Access Modes</h3>
<div class="table-container"><table>
<thead>
<tr>
<th>Access Flag</th>
<th>Resulting Access Mode</th>
</tr>
</thead>
<tbody>
<tr>
<td>H5F_ACC_EXCL</td>
<td>If the file already exists, H5Fcreate fails. If the file does not exist,it is created and opened with read-write access. (Default)</td>
</tr>
<tr>
<td>H5F_ACC_TRUNC</td>
<td>If the file already exists, the file is opened with read-write access, and new data will overwrite any existing data. If the file does not exist, it is created and opened with read-write access.</td>
</tr>
<tr>
<td>H5F_ACC_RDONLY</td>
<td>An existing file is opened with read-only access. If the file does not exist, H5Fopen fails. (Default)</td>
</tr>
<tr>
<td>H5F_ACC_RDWR</td>
<td>An existing file is opened with read-write access. If the file does not exist, H5Fopen fails.</td>
</tr>
</tbody>
</table></div>
<ul>
<li>By default, H5Fopen opens a file for read-only access; passing H5F_ACC_RDWR allows read-
write access to the file.</li>
<li>By default, H5Fcreate fails if the file already exists; only passing H5F_ACC_TRUNC allows the
truncating of an existing file.</li>
</ul>
<h3 id="programming-model-for-files"><a href="#programming-model-for-files" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Programming Model for Files</h3>
<h4 id="creating-a-new-file"><a href="#creating-a-new-file" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Creating a New File</h4>
<p>The programming model for creating a new HDF5 file can be summarized as follows:</p>
<ul>
<li>Define the file creation property list</li>
<li>Define the file access property list</li>
<li>Create the file</li>
</ul>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fcreate</span> <span class="p">(</span><span class="s">&#34;SampleFile.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_EXCL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">)</span>
</code></pre></td></tr></table></div>
</div>
</div><h4 id="open-a-file"><a href="#open-a-file" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Open a file</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">faplist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span> <span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Pset_fapl_stdio</span> <span class="p">(</span><span class="n">faplist_id</span><span class="p">)</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span> <span class="p">(</span><span class="s">&#34;SampleFile.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDONLY</span><span class="p">,</span> <span class="n">faplist_id</span><span class="p">)</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span> <span class="p">(</span><span class="n">file_id</span><span class="p">)</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="hdf5-groups"><a href="#hdf5-groups" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>HDF5 Groups</h2>
<p>HDF5 groups are analogous to the directories and folders; HDF5 datasets are analogous to the files.</p>
<h3 id="programming-model-for-groups"><a href="#programming-model-for-groups" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Programming Model for Groups</h3>
<h4 id="creating-a-group"><a href="#creating-a-group" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Creating a Group</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">file</span><span class="p">;</span>
<span class="n">file</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(....);</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">H5Gcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/Data&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">group_new1</span> <span class="o">=</span> <span class="n">H5Gcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/Data/Data_new1&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span>
<span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">group_new2</span> <span class="o">=</span> <span class="n">H5Gcreate</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="s">&#34;Data_new2&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h4 id="opening-a-group-and-accessing-an-object-in-that-group"><a href="#opening-a-group-and-accessing-an-object-in-that-group" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Opening a Group and Accessing an Object in that Group</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">group</span> <span class="o">=</span> <span class="n">H5Gopen</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;Data&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">dataset1</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="s">&#34;CData&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/Data/CData&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h4 id="creating-a-dataset-in-a-specific-group"><a href="#creating-a-dataset-in-a-specific-group" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Creating a Dataset in a Specific Group</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">RANK</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="n">dataset1</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/Data/CData&#34;</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span>
<span class="n">dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">H5Gopen</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;Data&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">dataset2</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">group</span><span class="p">,</span> <span class="s">&#34;Cdata2&#34;</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span>
<span class="n">dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">herr_t</span> <span class="n">status</span><span class="p">;</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Gclose</span><span class="p">(</span><span class="n">group</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="hdf5-datasets"><a href="#hdf5-datasets" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>HDF5 Datasets</h2>
<h3 id="programming-model-for-datasets"><a href="#programming-model-for-datasets" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Programming Model for Datasets</h3>
<h4 id="create-dataset"><a href="#create-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Create Dataset</h4>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">;</span>
<span class="cm">/*
</span><span class="cm">* Create dataspace: Describe the size of the array and
</span><span class="cm">* create the dataspace for fixed-size dataset.
</span><span class="cm">*/</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dimsf</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Define datatype for the data in the file.
</span><span class="cm">* For this example, store little-endian integer numbers.
</span><span class="cm">*/</span>
<span class="n">datatype</span> <span class="o">=</span> <span class="n">H5Tcopy</span><span class="p">(</span><span class="n">H5T_NATIVE_INT</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Tset_order</span><span class="p">(</span><span class="n">datatype</span><span class="p">,</span> <span class="n">H5T_ORDER_LE</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Create a new dataset within the file using defined
</span><span class="cm">* dataspace and datatype. No properties are set.
</span><span class="cm">*/</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span>
<span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
<span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="n">H5Tclose</span><span class="p">(</span><span class="n">datatype</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">;</span>
<span class="n">hid_t</span> <span class="n">plist</span><span class="p">;</span> <span class="cm">/* property list */</span>
<span class="kt">int</span> <span class="n">fillval</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="n">dimsf</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span><span class="p">;</span>
<span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dimsf</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="n">datatype</span> <span class="o">=</span> <span class="n">H5Tcopy</span><span class="p">(</span><span class="n">H5T_NATIVE_INT</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Tset_order</span><span class="p">(</span><span class="n">datatype</span><span class="p">,</span> <span class="n">H5T_ORDER_LE</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Example of Dataset Creation property list: set fill value
</span><span class="cm">* to &#39;-1&#39;
</span><span class="cm">*/</span>
<span class="n">plist</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_CREATE</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Pset_fill_value</span><span class="p">(</span><span class="n">plist</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">fillval</span><span class="p">);</span>
<span class="cm">/* Same as above, but use the property list */</span>
<span class="n">dataset</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">datatype</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span>
<span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">plist</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
<span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
<span class="n">H5Tclose</span><span class="p">(</span><span class="n">datatype</span><span class="p">);</span>
<span class="n">H5Pclose</span><span class="p">(</span><span class="n">plist</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h4 id="data-transfer-operations-on-a-dataset"><a href="#data-transfer-operations-on-a-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Data Transfer Operations on a Dataset</h4>
<p>A data transfer has the following basic steps:</p>
<ol>
<li>Allocate and initialize memory space as needed</li>
<li>Define the datatype of the memory elements</li>
<li>Define the elements to be transferred (a selection, or all the elements)</li>
<li>Set data transfer properties (including parameters for filters or file drivers) as needed</li>
<li>Call the H5D API</li>
</ol>
<h5 id="example"><a href="#example" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example</h5>
<ol>
<li>Write an array of integers</li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span>  <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span> <span class="cm">/* identifiers */</span>
<span class="n">herr_t</span>  <span class="n">status</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>
<span class="cm">/* Initialize the dataset. */</span>
<span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="n">dset_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>
<span class="cm">/* Open an existing file. */</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/* Open an existing dataset. */</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/* Write the entire dataset, using &#39;dset_data&#39;:
</span><span class="cm">memory type is &#39;native int&#39;
</span><span class="cm">write the entire dataspace to the entire dataspace,
</span><span class="cm">no transfer properties,
</span><span class="cm">*/</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span>
<span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><ol start="2">
<li></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
<span class="n">hid_t</span> <span class="n">xferplist</span><span class="p">;</span>
<span class="n">herr_t</span> <span class="n">status</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/*
</span><span class="cm">* Example: set type conversion buffer to 64MB
</span><span class="cm">*/</span>
<span class="n">xferplist</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_XFER</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Pset_buffer</span><span class="p">(</span> <span class="n">xferplist</span><span class="p">,</span> <span class="mi">64</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span><span class="mi">1024</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
<span class="cm">/* Write the entire dataset, using &#39;dset_data&#39;:
</span><span class="cm">memory type is &#39;native int&#39;
</span><span class="cm">write the entire dataspace to the entire dataspace,
</span><span class="cm">set the buffer size with the property list,
</span><span class="cm">*/</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span>
<span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">xferplist</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>

</code></pre></td></tr></table></div>
</div>
</div><ol start="3">
<li></li>
</ol>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
<span class="n">herr_t</span> <span class="n">status</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>
<span class="cm">/* Open an existing file. */</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/* Open an existing dataset. */</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/* read the entire dataset, into &#39;dset_data&#39;:
</span><span class="cm">memory type is &#39;native int&#39;
</span><span class="cm">read the entire dataspace to the entire dataspace,
</span><span class="cm">no transfer properties,
</span><span class="cm">*/</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span>
<span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">);</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h4 id="retrieve-the-properties-of-a-dataset"><a href="#retrieve-the-properties-of-a-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Retrieve the Properties of a Dataset</h4>
<p><img src="/imgs/querytbg.png" alt=""></p>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="n">hid_t</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
<span class="n">hid_t</span> <span class="n">dspace_id</span><span class="p">,</span> <span class="n">dtype_id</span><span class="p">,</span> <span class="n">plist_id</span><span class="p">;</span>
<span class="n">herr_t</span> <span class="n">status</span><span class="p">;</span>

<span class="cm">/* Open an existing file. */</span>
<span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="cm">/* Open an existing dataset. */</span>
<span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
<span class="n">dspace_id</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
<span class="n">dtype_id</span> <span class="o">=</span> <span class="n">H5Dget_type</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
<span class="n">plist_id</span> <span class="o">=</span> <span class="n">H5Dget_create_plist</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
<span class="cm">/* use the objects to discover the properties of the dataset */</span>
<span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="hdf5-attributes"><a href="#hdf5-attributes" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>HDF5 Attributes</h2>
<p>An HDF5 attribute is a small metadata object describing the nature and/or intended usage of a
primary data object. A primary data object may be a dataset, group, or committed datatype.</p>
<h2 id="chunking-in-hdf5"><a href="#chunking-in-hdf5" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Chunking in HDF5</h2>
<h2 id="parallel-io-examples"><a href="#parallel-io-examples" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Parallel IO Examples</h2>
<h3 id="example-1-parallel-write"><a href="#example-1-parallel-write" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 1: parallel write</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;hdf5.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;mpi.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">mpi_size</span><span class="p">,</span> <span class="n">mpi_rank</span><span class="p">;</span>
  <span class="n">MPI_Comm</span> <span class="n">comm</span> <span class="o">=</span> <span class="n">MPI_COMM_WORLD</span><span class="p">;</span>
  <span class="n">MPI_Info</span> <span class="n">info</span> <span class="o">=</span> <span class="n">MPI_INFO_NULL</span><span class="p">;</span>
  <span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
  <span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_rank</span><span class="p">);</span>
  <span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_size</span><span class="p">);</span>

  <span class="n">hid_t</span> <span class="n">plist_id</span><span class="p">,</span> <span class="n">file_id</span><span class="p">;</span>
  <span class="n">plist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
  <span class="n">H5Pset_fapl_mpio</span><span class="p">(</span><span class="n">plist_id</span><span class="p">,</span> <span class="n">comm</span><span class="p">,</span> <span class="n">info</span><span class="p">);</span> <span class="c1">// Stores MPI IO communicator information to the file access property list.
</span><span class="c1"></span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fcreate</span><span class="p">(</span><span class="s">&#34;parallel.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">plist_id</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">plist_id</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">hid_t</span> <span class="n">dataspace</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
  <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span> <span class="c1">// create dataspace
</span><span class="c1"></span>  <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dcreate</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;X&#34;</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">hid_t</span> <span class="n">mem_space</span><span class="p">,</span> <span class="n">file_space</span><span class="p">;</span>
  <span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">mpi_size</span><span class="p">;</span>
  <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpi_rank</span> <span class="o">*</span> <span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">mem_space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="n">file_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
  <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">file_space</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="kt">int</span><span class="o">*</span> <span class="n">data</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span> <span class="p">[</span><span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">])];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]);</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpi_rank</span><span class="p">;</span>

  <span class="n">plist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_XFER</span><span class="p">);</span>
  <span class="n">H5Pset_dxpl_mpio</span><span class="p">(</span><span class="n">plist_id</span><span class="p">,</span> <span class="n">H5FD_MPIO_COLLECTIVE</span><span class="p">);</span>
  <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">mem_space</span><span class="p">,</span> <span class="n">file_space</span><span class="p">,</span> <span class="n">plist_id</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">mem_space</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">file_space</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">plist_id</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>

  <span class="n">MPI_Finalize</span><span class="p">();</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><h3 id="example-2-parallel-read"><a href="#example-2-parallel-read" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 2: parallel read</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;hdf5.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;mpi.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">mpi_size</span><span class="p">,</span> <span class="n">mpi_rank</span><span class="p">;</span>
  <span class="n">MPI_Comm</span> <span class="n">comm</span> <span class="o">=</span> <span class="n">MPI_COMM_WORLD</span><span class="p">;</span>
  <span class="n">MPI_Info</span> <span class="n">info</span> <span class="o">=</span> <span class="n">MPI_INFO_NULL</span><span class="p">;</span>
  <span class="n">MPI_Init</span><span class="p">(</span><span class="o">&amp;</span><span class="n">argc</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">argv</span><span class="p">);</span>
  <span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_rank</span><span class="p">);</span>
  <span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_size</span><span class="p">);</span>

  <span class="n">hid_t</span> <span class="n">file_access</span><span class="p">,</span> <span class="n">file_id</span><span class="p">;</span>
  <span class="n">file_access</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
  <span class="n">H5Pset_fapl_mpio</span><span class="p">(</span><span class="n">file_access</span><span class="p">,</span> <span class="n">comm</span><span class="p">,</span> <span class="n">info</span><span class="p">);</span>
  <span class="kt">char</span> <span class="n">filename</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&#34;parallel.h5&#34;</span><span class="p">;</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">file_access</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">file_access</span><span class="p">);</span>

  <span class="n">hid_t</span> <span class="n">dataset</span><span class="p">,</span> <span class="n">dataset_space</span><span class="p">;</span>
  <span class="n">dataset</span> <span class="o">=</span> <span class="n">H5Dopen2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;X&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">dataset_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
  <span class="kt">int</span> <span class="n">rank</span><span class="p">;</span>
  <span class="n">hsize_t</span> <span class="o">*</span><span class="n">current_dims</span><span class="p">;</span>
  <span class="n">hsize_t</span> <span class="o">*</span><span class="n">max_dims</span><span class="p">;</span>
  <span class="n">rank</span> <span class="o">=</span> <span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">dataset_space</span><span class="p">);</span>   <span class="c1">// get the dataset information
</span><span class="c1"></span>  <span class="n">current_dims</span><span class="o">=</span> <span class="p">(</span><span class="n">hsize_t</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
  <span class="n">max_dims</span><span class="o">=</span><span class="p">(</span><span class="n">hsize_t</span><span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">rank</span><span class="o">*</span><span class="k">sizeof</span><span class="p">(</span><span class="n">hsize_t</span><span class="p">));</span>
  <span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">dataset_space</span><span class="p">,</span> <span class="n">current_dims</span><span class="p">,</span> <span class="n">max_dims</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">stride</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">mpi_rank</span> <span class="o">*</span> <span class="n">current_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">mpi_size</span><span class="p">;</span>
  <span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">/</span> <span class="n">mpi_size</span><span class="p">;</span>
  <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">current_dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="n">stride</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">stride</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span><span class="mi">1</span><span class="p">;</span>
  <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">dataset_space</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="n">stride</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="n">hid_t</span> <span class="n">mem_dataspace</span><span class="p">;</span>
  <span class="n">mem_dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

  <span class="c1">// int** data = new int*[2];
</span><span class="c1"></span>  <span class="c1">// int *array = new int [2 * 12];
</span><span class="c1"></span>  <span class="c1">// for(int i = 0; i &lt; 2; i++)
</span><span class="c1"></span>  <span class="c1">//   data[i] = &amp;array[i * 12];
</span><span class="c1"></span>  <span class="c1">// H5Dread(dataset, H5T_NATIVE_INT, mem_dataspace, dataset_space, H5P_DEFAULT, array);
</span><span class="c1"></span>
  <span class="kt">int</span> <span class="n">data</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">12</span><span class="p">];</span>
  <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">mem_dataspace</span><span class="p">,</span> <span class="n">dataset_space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>

  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">mpi_size</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">mpi_rank</span> <span class="o">==</span> <span class="n">i</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="s">&#34;rank &#34;</span> <span class="o">&lt;&lt;</span> <span class="n">mpi_rank</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; :&#34;</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
      <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">2</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">12</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
          <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">&lt;&lt;</span> <span class="s">&#34; &#34;</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="n">cout</span> <span class="o">&lt;&lt;</span> <span class="n">endl</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">MPI_Barrier</span><span class="p">(</span><span class="n">comm</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">mem_dataspace</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataset_space</span><span class="p">);</span>
  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="useful-examples"><a href="#useful-examples" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Useful Examples</h2>
<h3 id="example-1-write-all"><a href="#example-1-write-all" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 1: Write all</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++">   <span class="n">hid_t</span>       <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>  <span class="cm">/* identifiers */</span>
   <span class="n">herr_t</span>      <span class="n">status</span><span class="p">;</span>
   <span class="kt">int</span>         <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>

   <span class="cm">/* Initialize the dataset. */</span>
   <span class="k">for</span> <span class="p">(</span><span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="mi">4</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
      <span class="k">for</span> <span class="p">(</span><span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="mi">6</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
         <span class="n">dset_data</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="mi">6</span> <span class="o">+</span> <span class="n">j</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span>

   <span class="cm">/* Open an existing file. */</span>
   <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

   <span class="cm">/* Open an existing dataset. */</span>
   <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">);</span>

   <span class="cm">/* Write the entire dataset, using &#39;dset_data&#39;:
</span><span class="cm">         memory type is &#39;native int&#39;
</span><span class="cm">         write the entire dataspace to the entire dataspace,
</span><span class="cm">         no transfer properties,
</span><span class="cm">    */</span>
   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span>
           <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">);</span>
   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h3 id="example-2-read-all"><a href="#example-2-read-all" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 2: read all</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++">   <span class="n">Hid_t</span>       <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
   <span class="n">herr_t</span>      <span class="n">status</span><span class="p">;</span>
   <span class="kt">int</span>         <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">[</span><span class="mi">4</span><span class="p">][</span><span class="mi">6</span><span class="p">];</span>


   <span class="cm">/* Open an existing file. */</span>
   <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

   <span class="cm">/* Open an existing dataset. */</span>
   <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">);</span>

   <span class="cm">/* read the entire dataset, into &#39;dset_data&#39;:
</span><span class="cm">         memory type is &#39;native int&#39;
</span><span class="cm">         read the entire dataspace to the entire dataspace,
</span><span class="cm">         no transfer properties,
</span><span class="cm">    */</span>
   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dread</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span>
           <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dset_data</span><span class="p">);</span>

   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h3 id="example-3-extend-dataset"><a href="#example-3-extend-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 3: Extend dataset</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++">   <span class="n">hid_t</span>       <span class="n">file_id</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">;</span>
   <span class="n">Herr_t</span>      <span class="n">status</span><span class="p">;</span>
   <span class="n">size_t</span>        <span class="n">newdims</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>


   <span class="cm">/* Open an existing file. */</span>
   <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="s">&#34;dset.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

   <span class="cm">/* Open an existing dataset. */</span>
   <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dopen</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/dset&#34;</span><span class="p">);</span>

   <span class="cm">/* Example:  dataset is 2 X 3, each dimension is UNLIMITED */</span>
   <span class="cm">/* extend to 2 X 7 */</span>
   <span class="n">newdims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
   <span class="n">newdims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>

   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dextend</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">newdims</span><span class="p">);</span>

   <span class="cm">/* dataset is now 2 X 7 */</span>

   <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
</code></pre></td></tr></table></div>
</div>
</div><h3 id="example-4-create-and-extend-an-unlimited-dataset"><a href="#example-4-create-and-extend-an-unlimited-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 4: create and extend an unlimited dataset</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&#34;hdf5.h&#34;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdio.h&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;stdlib.h&gt;</span><span class="cp">
</span><span class="cp"></span>
<span class="cp">#define FILE            &#34;h5ex_d_unlimadd.h5&#34;
</span><span class="cp">#define DATASET         &#34;DS1&#34;
</span><span class="cp">#define DIM0            4
</span><span class="cp">#define DIM1            7
</span><span class="cp">#define EDIM0           6
</span><span class="cp">#define EDIM1           10
</span><span class="cp">#define CHUNK0          4
</span><span class="cp">#define CHUNK1          4
</span><span class="cp"></span>
<span class="kt">int</span>
<span class="nf">main</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
    <span class="n">hid_t</span>           <span class="n">file</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">dset</span><span class="p">,</span> <span class="n">dcpl</span><span class="p">;</span>    <span class="cm">/* Handles */</span>
    <span class="n">herr_t</span>          <span class="n">status</span><span class="p">;</span>
    <span class="n">hsize_t</span>         <span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">DIM0</span><span class="p">,</span> <span class="n">DIM1</span><span class="p">},</span>
                    <span class="n">extdims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">EDIM0</span><span class="p">,</span> <span class="n">EDIM1</span><span class="p">},</span>
                    <span class="n">maxdims</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="n">chunk</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">CHUNK0</span><span class="p">,</span> <span class="n">CHUNK1</span><span class="p">},</span>
                    <span class="n">start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
                    <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="kt">int</span>             <span class="n">wdata</span><span class="p">[</span><span class="n">DIM0</span><span class="p">][</span><span class="n">DIM1</span><span class="p">],</span>          <span class="cm">/* Write buffer */</span>
                    <span class="n">wdata2</span><span class="p">[</span><span class="n">EDIM0</span><span class="p">][</span><span class="n">EDIM1</span><span class="p">],</span>       <span class="cm">/* Write buffer for
</span><span class="cm">                                                   extension */</span>
                    <span class="o">**</span><span class="n">rdata</span><span class="p">,</span>                    <span class="cm">/* Read buffer */</span>
                    <span class="n">ndims</span><span class="p">,</span>
                    <span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">;</span>

    <span class="cm">/*
</span><span class="cm">     * Initialize data.
</span><span class="cm">     */</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">DIM0</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">DIM1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">wdata</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="n">j</span> <span class="o">-</span> <span class="n">j</span><span class="p">;</span>

    <span class="cm">/*
</span><span class="cm">     * Create a new file using the default properties.
</span><span class="cm">     */</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">H5Fcreate</span> <span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Create dataspace with unlimited dimensions.
</span><span class="cm">     */</span>
    <span class="n">maxdims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">H5S_UNLIMITED</span><span class="p">;</span>
    <span class="n">maxdims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">H5S_UNLIMITED</span><span class="p">;</span>
    <span class="n">space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">maxdims</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Create the dataset creation property list, and set the chunk
</span><span class="cm">     * size.
</span><span class="cm">     */</span>
    <span class="n">dcpl</span> <span class="o">=</span> <span class="n">H5Pcreate</span> <span class="p">(</span><span class="n">H5P_DATASET_CREATE</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Pset_chunk</span> <span class="p">(</span><span class="n">dcpl</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">chunk</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Create the unlimited dataset.
</span><span class="cm">     */</span>
    <span class="n">dset</span> <span class="o">=</span> <span class="n">H5Dcreate</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">DATASET</span><span class="p">,</span> <span class="n">H5T_STD_I32LE</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dcpl</span><span class="p">,</span>
                <span class="n">H5P_DEFAULT</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Write the data to the dataset.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span> <span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span>
                <span class="n">wdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="cm">/*
</span><span class="cm">     * Close and release resources.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Pclose</span> <span class="p">(</span><span class="n">dcpl</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sclose</span> <span class="p">(</span><span class="n">space</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span> <span class="p">(</span><span class="n">file</span><span class="p">);</span>


    <span class="cm">/*
</span><span class="cm">     * In this next section we read back the data, extend the dataset,
</span><span class="cm">     * and write new data to the extended portions.
</span><span class="cm">     */</span>

    <span class="cm">/*
</span><span class="cm">     * Open file and dataset using the default properties.
</span><span class="cm">     */</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">H5Fopen</span> <span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
    <span class="n">dset</span> <span class="o">=</span> <span class="n">H5Dopen</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">DATASET</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Get dataspace and allocate memory for read buffer.  This is a
</span><span class="cm">     * two dimensional dataset so the dynamic allocation must be done
</span><span class="cm">     * in steps.
</span><span class="cm">     */</span>
    <span class="n">space</span> <span class="o">=</span> <span class="n">H5Dget_space</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>
    <span class="n">ndims</span> <span class="o">=</span> <span class="n">H5Sget_simple_extent_dims</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Allocate array of pointers to rows.
</span><span class="cm">     */</span>
    <span class="n">rdata</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">**</span><span class="p">)</span> <span class="n">malloc</span> <span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="k">sizeof</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">));</span>

    <span class="cm">/*
</span><span class="cm">     * Allocate space for integer data.
</span><span class="cm">     */</span>
    <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span> <span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="k">sizeof</span> <span class="p">(</span><span class="kt">int</span><span class="p">));</span>

    <span class="cm">/*
</span><span class="cm">     * Set the rest of the pointers to rows to the correct addresses.
</span><span class="cm">     */</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">rdata</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

    <span class="cm">/*
</span><span class="cm">     * Read the data using the default properties.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dread</span> <span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span>
                <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="cm">/*
</span><span class="cm">     * Output the data to the screen.
</span><span class="cm">     */</span>
    <span class="n">printf</span> <span class="p">(</span><span class="s">&#34;Dataset before extension:</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span> <span class="p">(</span><span class="s">&#34; [&#34;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">printf</span> <span class="p">(</span><span class="s">&#34; %3d&#34;</span><span class="p">,</span> <span class="n">rdata</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
        <span class="n">printf</span> <span class="p">(</span><span class="s">&#34;]</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sclose</span> <span class="p">(</span><span class="n">space</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Extend the dataset.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dset_extent</span> <span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="n">extdims</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Retrieve the dataspace for the newly extended dataset.
</span><span class="cm">     */</span>
    <span class="n">space</span> <span class="o">=</span> <span class="n">H5Dget_space</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Initialize data for writing to the extended dataset.
</span><span class="cm">     */</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">EDIM0</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">EDIM1</span><span class="p">;</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">wdata2</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">j</span><span class="p">;</span>

    <span class="cm">/*
</span><span class="cm">     * Select the entire dataspace.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sselect_all</span> <span class="p">(</span><span class="n">space</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Subtract a hyperslab reflecting the original dimensions from the
</span><span class="cm">     * selection.  The selection now contains only the newly extended
</span><span class="cm">     * portions of the dataset.
</span><span class="cm">     */</span>
    <span class="n">start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sselect_hyperslab</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">H5S_SELECT_NOTB</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span>
                <span class="nb">NULL</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Write the data to the selected portion of the dataset.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dwrite</span> <span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span>
                <span class="n">wdata2</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="cm">/*
</span><span class="cm">     * Close and release resources.
</span><span class="cm">     */</span>
    <span class="n">free</span> <span class="p">(</span><span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">rdata</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sclose</span> <span class="p">(</span><span class="n">space</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span> <span class="p">(</span><span class="n">file</span><span class="p">);</span>


    <span class="cm">/*
</span><span class="cm">     * Now we simply read back the data and output it to the screen.
</span><span class="cm">     */</span>

    <span class="cm">/*
</span><span class="cm">     * Open file and dataset using the default properties.
</span><span class="cm">     */</span>
    <span class="n">file</span> <span class="o">=</span> <span class="n">H5Fopen</span> <span class="p">(</span><span class="n">FILE</span><span class="p">,</span> <span class="n">H5F_ACC_RDONLY</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
    <span class="n">dset</span> <span class="o">=</span> <span class="n">H5Dopen</span> <span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="n">DATASET</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

    <span class="cm">/*
</span><span class="cm">     * Get dataspace and allocate memory for the read buffer as before.
</span><span class="cm">     */</span>
    <span class="n">space</span> <span class="o">=</span> <span class="n">H5Dget_space</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>
    <span class="n">ndims</span> <span class="o">=</span> <span class="n">H5Sget_simple_extent_dims</span> <span class="p">(</span><span class="n">space</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">rdata</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">**</span><span class="p">)</span> <span class="n">malloc</span> <span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="k">sizeof</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">));</span>
    <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span> <span class="p">(</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">*</span> <span class="k">sizeof</span> <span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="n">rdata</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">i</span> <span class="o">*</span> <span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>

    <span class="cm">/*
</span><span class="cm">     * Read the data using the default properties.
</span><span class="cm">     */</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dread</span> <span class="p">(</span><span class="n">dset</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span>
                <span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>

    <span class="cm">/*
</span><span class="cm">     * Output the data to the screen.
</span><span class="cm">     */</span>
    <span class="n">printf</span> <span class="p">(</span><span class="s">&#34;</span><span class="se">\n</span><span class="s">Dataset after extension:</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">printf</span> <span class="p">(</span><span class="s">&#34; [&#34;</span><span class="p">);</span>
        <span class="k">for</span> <span class="p">(</span><span class="n">j</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">j</span><span class="o">&lt;</span><span class="n">dims</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="n">printf</span> <span class="p">(</span><span class="s">&#34; %3d&#34;</span><span class="p">,</span> <span class="n">rdata</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
        <span class="n">printf</span> <span class="p">(</span><span class="s">&#34;]</span><span class="se">\n</span><span class="s">&#34;</span><span class="p">);</span>
    <span class="p">}</span>

    <span class="cm">/*
</span><span class="cm">     * Close and release resources.
</span><span class="cm">     */</span>
    <span class="n">free</span> <span class="p">(</span><span class="n">rdata</span><span class="p">[</span><span class="mi">0</span><span class="p">]);</span>
    <span class="n">free</span><span class="p">(</span><span class="n">rdata</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Dclose</span> <span class="p">(</span><span class="n">dset</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Sclose</span> <span class="p">(</span><span class="n">space</span><span class="p">);</span>
    <span class="n">status</span> <span class="o">=</span> <span class="n">H5Fclose</span> <span class="p">(</span><span class="n">file</span><span class="p">);</span>

    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><h3 id="example-5-write-with-increase-dataset"><a href="#example-5-write-with-increase-dataset" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 5: write with increase dataset</h3>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&#34;hdf5.h&#34;</span><span class="cp">
</span><span class="cp"></span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">fill_array</span><span class="p">(</span><span class="kt">int</span> <span class="n">len</span><span class="p">,</span> <span class="kt">int</span> <span class="n">val</span><span class="p">,</span> <span class="kt">int</span> <span class="o">*</span><span class="n">array</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">len</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="n">array</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">val</span> <span class="o">+</span> <span class="n">i</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">**</span><span class="n">argv</span><span class="p">)</span> <span class="p">{</span>

  <span class="n">hid_t</span> <span class="n">file_id</span><span class="p">;</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fcreate</span><span class="p">(</span><span class="s">&#34;parallel2.h5&#34;</span><span class="p">,</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">},</span> <span class="n">max_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">H5S_UNLIMITED</span><span class="p">,</span> <span class="n">H5S_UNLIMITED</span><span class="p">};</span>
  <span class="n">hsize_t</span> <span class="n">chunk</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">2</span><span class="p">,</span> <span class="mi">12</span><span class="p">};</span>
  <span class="n">hid_t</span> <span class="n">dataspace</span><span class="p">,</span> <span class="n">dataset_id</span><span class="p">,</span> <span class="n">dcpl</span><span class="p">;</span>

  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">dims</span><span class="p">,</span> <span class="n">max_dims</span><span class="p">);</span> <span class="c1">// create dataspace
</span><span class="c1"></span>  <span class="n">dcpl</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_CREATE</span><span class="p">);</span>
  <span class="n">H5Pset_chunk</span><span class="p">(</span><span class="n">dcpl</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">chunk</span><span class="p">);</span>
  <span class="n">dataset_id</span> <span class="o">=</span> <span class="n">H5Dcreate2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/X&#34;</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">dcpl</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataspace</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">dcpl</span><span class="p">);</span>

  <span class="kt">int</span> <span class="n">times</span> <span class="o">=</span> <span class="mi">6</span><span class="p">;</span>
  <span class="n">hsize_t</span> <span class="n">count</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">hid_t</span> <span class="n">dataset_dataspace</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">),</span> <span class="n">mem_dataspace</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">data</span><span class="p">[</span><span class="mi">24</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">times</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">fill_array</span><span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="n">H5Dset_extent</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">dims</span><span class="p">);</span>
      <span class="n">dataset_dataspace</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
      <span class="n">count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
      <span class="n">count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">12</span><span class="p">;</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">-</span> <span class="mi">2</span><span class="p">;</span>
      <span class="n">offset</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
      <span class="n">mem_dataspace</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
      <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">dataset_dataspace</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">offset</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
      <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_INT</span><span class="p">,</span> <span class="n">mem_dataspace</span><span class="p">,</span> <span class="n">dataset_dataspace</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">data</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>


  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">dataset_id</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">dataset_dataspace</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>

  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="example-6-append-to-a-file"><a href="#example-6-append-to-a-file" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>example 6: Append to a file</h2>
<div class="highlight"><div class="chroma">
<div class="table-container"><table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-c++" data-lang="c++"><span class="kt">void</span> <span class="nf">CreateFile</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">MatrixD</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">SampleGenerator</span> <span class="n">generator</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">20</span><span class="p">,</span> <span class="n">n_features</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="n">VectorD</span> <span class="n">coef</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">generator</span><span class="p">.</span><span class="n">MakeRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">,</span> <span class="n">n_features</span><span class="p">);</span>

  <span class="k">const</span> <span class="kt">int</span> <span class="n">MAX</span> <span class="o">=</span> <span class="mf">1e4</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">hdf5_file_address</span> <span class="o">=</span> <span class="s">&#34;extend.h5&#34;</span><span class="p">;</span>
  <span class="n">hid_t</span> <span class="n">file_id</span><span class="p">;</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fcreate</span><span class="p">(</span><span class="n">hdf5_file_address</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">H5F_ACC_TRUNC</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">x_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">sample_size</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">hsize_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n_features</span><span class="p">)},</span> <span class="n">max_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">H5S_UNLIMITED</span><span class="p">,</span> <span class="n">H5S_UNLIMITED</span><span class="p">};</span>
  <span class="n">hsize_t</span> <span class="n">chunk</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="n">MAX</span><span class="p">,</span> <span class="k">static_cast</span><span class="o">&lt;</span><span class="n">hsize_t</span><span class="o">&gt;</span><span class="p">(</span><span class="n">n_features</span><span class="p">)};</span>
  <span class="n">hid_t</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">X_id</span><span class="p">,</span> <span class="n">Y_space</span><span class="p">,</span> <span class="n">Y_id</span><span class="p">,</span> <span class="n">X_dcpl</span><span class="p">,</span> <span class="n">Y_dcpl</span><span class="p">,</span> <span class="n">X_mem_space</span><span class="p">,</span> <span class="n">Y_mem_space</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">x_dims</span><span class="p">,</span> <span class="n">max_dims</span><span class="p">);</span>
  <span class="n">X_dcpl</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_CREATE</span><span class="p">);</span>
  <span class="n">H5Pset_chunk</span><span class="p">(</span><span class="n">X_dcpl</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="n">chunk</span><span class="p">);</span>
  <span class="n">X_id</span> <span class="o">=</span> <span class="n">H5Dcreate2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/X&#34;</span><span class="p">,</span> <span class="n">H5T_NATIVE_DOUBLE</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">X_dcpl</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">X_dcpl</span><span class="p">);</span>
  <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_DOUBLE</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5S_ALL</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>

  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">ExtendFile</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">MatrixD</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">SampleGenerator</span> <span class="n">generator</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">n_features</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="n">VectorD</span> <span class="n">coef</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">generator</span><span class="p">.</span><span class="n">MakeRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">,</span> <span class="n">n_features</span><span class="p">);</span>
  <span class="n">hid_t</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">faplist_id</span><span class="p">,</span> <span class="n">X_id</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">X_mem_space</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">hdf5_file_address</span> <span class="o">=</span> <span class="s">&#34;extend.h5&#34;</span><span class="p">;</span>
  <span class="n">faplist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span> <span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
  <span class="n">H5Pset_fapl_stdio</span> <span class="p">(</span><span class="n">faplist_id</span><span class="p">);</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span> <span class="p">(</span><span class="n">hdf5_file_address</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">faplist_id</span><span class="p">);</span>

  <span class="n">X_id</span> <span class="o">=</span> <span class="n">H5Dopen2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/X&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">hsize_t</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_count</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">x_start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">x_count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">n_features</span><span class="p">;</span>
  <span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">x_start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
  <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sample_size</span><span class="p">;</span>
  <span class="n">H5Dset_extent</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">);</span>
  <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">x_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_size</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">X_mem_space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">x_start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_DOUBLE</span><span class="p">,</span> <span class="n">X_mem_space</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>

  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_mem_space</span><span class="p">);</span>
  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">ExtendFile2</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">MatrixD</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">SampleGenerator</span> <span class="n">generator</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">,</span> <span class="n">n_features</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="n">VectorD</span> <span class="n">coef</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>

  <span class="n">hid_t</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">faplist_id</span><span class="p">,</span> <span class="n">X_id</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">X_mem_space</span><span class="p">;</span>
  <span class="n">string</span> <span class="n">hdf5_file_address</span> <span class="o">=</span> <span class="s">&#34;extend.h5&#34;</span><span class="p">;</span>
  <span class="n">faplist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span> <span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
  <span class="n">H5Pset_fapl_stdio</span> <span class="p">(</span><span class="n">faplist_id</span><span class="p">);</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span> <span class="p">(</span><span class="n">hdf5_file_address</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">faplist_id</span><span class="p">);</span>

  <span class="kt">int</span> <span class="n">time</span> <span class="o">=</span> <span class="mi">13000</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">time</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">generator</span><span class="p">.</span><span class="n">MakeRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">,</span> <span class="n">n_features</span><span class="p">);</span>
    <span class="n">X_id</span> <span class="o">=</span> <span class="n">H5Dopen2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/X&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
    <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
    <span class="n">hsize_t</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_count</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
    <span class="n">x_start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="n">x_count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">n_features</span><span class="p">;</span>
    <span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
    <span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">x_start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
    <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sample_size</span><span class="p">;</span>
    <span class="n">H5Dset_extent</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">);</span>
    <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
    <span class="n">x_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_size</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
    <span class="n">X_mem_space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">x_start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
    <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_DOUBLE</span><span class="p">,</span> <span class="n">X_mem_space</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
  <span class="p">}</span>

  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_mem_space</span><span class="p">);</span>
  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">ExtendFile_mpi</span><span class="p">()</span> <span class="p">{</span>

  <span class="n">MatrixD</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">SampleGenerator</span> <span class="n">generator</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">sample_size</span> <span class="o">=</span> <span class="mi">500</span><span class="p">,</span> <span class="n">n_features</span> <span class="o">=</span> <span class="mi">1000</span><span class="p">;</span>
  <span class="n">VectorD</span> <span class="n">coef</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">generator</span><span class="p">.</span><span class="n">MakeRegression</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">coef</span><span class="p">,</span> <span class="n">sample_size</span><span class="p">,</span> <span class="n">n_features</span><span class="p">);</span>

  <span class="kt">int</span> <span class="n">mpi_size</span><span class="p">,</span> <span class="n">mpi_rank</span><span class="p">;</span>
  <span class="n">MPI_Comm</span> <span class="n">comm</span> <span class="o">=</span> <span class="n">MPI_COMM_WORLD</span><span class="p">;</span>
  <span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_rank</span><span class="p">);</span>
  <span class="n">MPI_Comm_size</span><span class="p">(</span><span class="n">comm</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mpi_size</span><span class="p">);</span>

  <span class="n">string</span> <span class="n">file_address</span> <span class="o">=</span> <span class="s">&#34;extend.h5&#34;</span><span class="p">;</span>
  <span class="n">hid_t</span> <span class="n">file_access</span><span class="p">,</span> <span class="n">file_id</span><span class="p">,</span> <span class="n">plist_id</span><span class="p">;</span>
  <span class="n">file_access</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_FILE_ACCESS</span><span class="p">);</span>
  <span class="n">H5Pset_fapl_mpio</span><span class="p">(</span><span class="n">file_access</span><span class="p">,</span> <span class="n">comm</span><span class="p">,</span> <span class="n">MPI_INFO_NULL</span><span class="p">);</span>
  <span class="n">file_id</span> <span class="o">=</span> <span class="n">H5Fopen</span><span class="p">(</span><span class="n">file_address</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span> <span class="n">H5F_ACC_RDWR</span><span class="p">,</span> <span class="n">file_access</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">file_access</span><span class="p">);</span>

  <span class="n">hid_t</span> <span class="n">X_id</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">mem_space</span><span class="p">;</span>
  <span class="n">X_id</span> <span class="o">=</span> <span class="n">H5Dopen2</span><span class="p">(</span><span class="n">file_id</span><span class="p">,</span> <span class="s">&#34;/X&#34;</span><span class="p">,</span> <span class="n">H5P_DEFAULT</span><span class="p">);</span>
  <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>

  <span class="n">hsize_t</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_start</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">x_count</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">offset</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="n">x_start</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">x_count</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">n_features</span><span class="p">;</span>
  <span class="n">H5Sget_simple_extent_ndims</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Sget_simple_extent_dims</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">x_start</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+</span> <span class="n">mpi_rank</span> <span class="o">*</span> <span class="n">sample_size</span><span class="p">;</span>
  <span class="n">X_dims</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="n">sample_size</span> <span class="o">*</span> <span class="n">mpi_size</span><span class="p">;</span>
  <span class="n">H5Dset_extent</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">X_dims</span><span class="p">);</span>
  <span class="n">X_space</span> <span class="o">=</span> <span class="n">H5Dget_space</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">x_count</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_size</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
  <span class="n">mem_space</span> <span class="o">=</span> <span class="n">H5Screate_simple</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="n">H5Sselect_hyperslab</span><span class="p">(</span><span class="n">X_space</span><span class="p">,</span> <span class="n">H5S_SELECT_SET</span><span class="p">,</span> <span class="n">x_start</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="n">x_count</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">);</span>
  <span class="c1">// MPI_Barrier(comm);
</span><span class="c1"></span>
  <span class="n">plist_id</span> <span class="o">=</span> <span class="n">H5Pcreate</span><span class="p">(</span><span class="n">H5P_DATASET_XFER</span><span class="p">);</span>
  <span class="n">H5Pset_dxpl_mpio</span><span class="p">(</span><span class="n">plist_id</span><span class="p">,</span> <span class="n">H5FD_MPIO_COLLECTIVE</span><span class="p">);</span>
  <span class="n">H5Dwrite</span><span class="p">(</span><span class="n">X_id</span><span class="p">,</span> <span class="n">H5T_NATIVE_DOUBLE</span><span class="p">,</span> <span class="n">mem_space</span><span class="p">,</span> <span class="n">X_space</span><span class="p">,</span> <span class="n">plist_id</span><span class="p">,</span> <span class="n">x</span><span class="p">.</span><span class="n">data</span><span class="p">());</span>
  <span class="c1">// MPI_Barrier(comm);
</span><span class="c1"></span>
  <span class="n">H5Dclose</span><span class="p">(</span><span class="n">X_id</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">mem_space</span><span class="p">);</span>
  <span class="n">H5Sclose</span><span class="p">(</span><span class="n">X_space</span><span class="p">);</span>
  <span class="n">H5Pclose</span><span class="p">(</span><span class="n">plist_id</span><span class="p">);</span>
  <span class="n">H5Fclose</span><span class="p">(</span><span class="n">file_id</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></td></tr></table></div>
</div>
</div><h2 id="reference"><a href="#reference" class="anchor-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon anchor-icon"><path d="M326.612 185.391c59.747 59.809 58.927 155.698.36 214.59-.11.12-.24.25-.36.37l-67.2 67.2c-59.27 59.27-155.699 59.262-214.96 0-59.27-59.26-59.27-155.7 0-214.96l37.106-37.106c9.84-9.84 26.786-3.3 27.294 10.606.648 17.722 3.826 35.527 9.69 52.721 1.986 5.822.567 12.262-3.783 16.612l-13.087 13.087c-28.026 28.026-28.905 73.66-1.155 101.96 28.024 28.579 74.086 28.749 102.325.51l67.2-67.19c28.191-28.191 28.073-73.757 0-101.83-3.701-3.694-7.429-6.564-10.341-8.569a16.037 16.037 0 0 1-6.947-12.606c-.396-10.567 3.348-21.456 11.698-29.806l21.054-21.055c5.521-5.521 14.182-6.199 20.584-1.731a152.482 152.482 0 0 1 20.522 17.197zM467.547 44.449c-59.261-59.262-155.69-59.27-214.96 0l-67.2 67.2c-.12.12-.25.25-.36.37-58.566 58.892-59.387 154.781.36 214.59a152.454 152.454 0 0 0 20.521 17.196c6.402 4.468 15.064 3.789 20.584-1.731l21.054-21.055c8.35-8.35 12.094-19.239 11.698-29.806a16.037 16.037 0 0 0-6.947-12.606c-2.912-2.005-6.64-4.875-10.341-8.569-28.073-28.073-28.191-73.639 0-101.83l67.2-67.19c28.239-28.239 74.3-28.069 102.325.51 27.75 28.3 26.872 73.934-1.155 101.96l-13.087 13.087c-4.35 4.35-5.769 10.79-3.783 16.612 5.864 17.194 9.042 34.999 9.69 52.721.509 13.906 17.454 20.446 27.294 10.606l37.106-37.106c59.271-59.259 59.271-155.699.001-214.959z"/></svg></a>Reference</h2>
<ol>
<li><a href="https://support.hdfgroup.org/HDF5/doc/Advanced/Chunking/" target="_blank" rel="noopener">Chunking</a></li>
<li><a href="https://support.hdfgroup.org/HDF5/doc/RM/RM_H5D.html#Dataset-SetExtent" target="_blank" rel="noopener">HDF5 Reference Manual </a></li>
</ol>

            </div>

        </article>

        

        
    
    
        <ul class="post-copyright">
            <li class="copyright-item author"><span class="copyright-item-text">作者</span>：<a href="https://liudyboy.github.io/" target="_blank" rel="noopener">liudy</a></li>
            
                
                
                
                
                <li class="copyright-item link"><span class="copyright-item-text">链接</span>：<a href="/posts/hdf5-note/" target="_blank" rel="noopener">https://liudyboy.github.io/posts/hdf5-note/</a></li>
            
            <li class="copyright-item license"><span class="copyright-item-text">许可</span>：<a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></li>
            
        </ul>
    



        
    <div class="updated-badge-container">
        <span title="Updated @ 2021-03-12 09:28:14 CST" style="cursor:help">

<svg xmlns="http://www.w3.org/2000/svg" width="130" height="20" class="updated-badge"><linearGradient id="b" x2="0" y2="100%"><stop offset="0" stop-color="#bbb" stop-opacity=".1"/><stop offset="1" stop-opacity=".1"/></linearGradient><clipPath id="a"><rect width="130" height="20" rx="3" fill="#fff"/></clipPath><g clip-path="url(#a)"><path class="updated-badge-left" d="M0 0h55v20H0z"/><path class="updated-badge-right" d="M55 0h75v20H55z"/><path fill="url(#b)" d="M0 0h130v20H0z"/></g><g fill="#fff" text-anchor="middle" font-size="110"><text x="285" y="150" fill="#010101" fill-opacity=".3" textLength="450" transform="scale(.1)">updated</text><text x="285" y="140" textLength="450" transform="scale(.1)">updated</text><text x="915" y="150" fill="#010101" fill-opacity=".3" textLength="650" transform="scale(.1)">2021-03-12</text><text x="915" y="140" textLength="650" transform="scale(.1)">2021-03-12</text></g></svg>
        </span></div>



        


        <div class="post-share">

        

        <div class="share-items">

            

            

            

            

            
                <div class="share-item weibo">
                    
                    <a href="https://service.weibo.com/share/share.php?&amp;url=https://liudyboy.github.io/posts/hdf5-note/&amp;title=HDF5%20Note&amp;pic=https://liudyboy.github.io/imgs/typesss.png&amp;searchPic=false" title="分享到「新浪微博」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon weibo-icon"><path d="M407 177.6c7.6-24-13.4-46.8-37.4-41.7-22 4.8-28.8-28.1-7.1-32.8 50.1-10.9 92.3 37.1 76.5 84.8-6.8 21.2-38.8 10.8-32-10.3zM214.8 446.7C108.5 446.7 0 395.3 0 310.4c0-44.3 28-95.4 76.3-143.7C176 67 279.5 65.8 249.9 161c-4 13.1 12.3 5.7 12.3 6 79.5-33.6 140.5-16.8 114 51.4-3.7 9.4 1.1 10.9 8.3 13.1 135.7 42.3 34.8 215.2-169.7 215.2zm143.7-146.3c-5.4-55.7-78.5-94-163.4-85.7-84.8 8.6-148.8 60.3-143.4 116s78.5 94 163.4 85.7c84.8-8.6 148.8-60.3 143.4-116zM347.9 35.1c-25.9 5.6-16.8 43.7 8.3 38.3 72.3-15.2 134.8 52.8 111.7 124-7.4 24.2 29.1 37 37.4 12 31.9-99.8-55.1-195.9-157.4-174.3zm-78.5 311c-17.1 38.8-66.8 60-109.1 46.3-40.8-13.1-58-53.4-40.3-89.7 17.7-35.4 63.1-55.4 103.4-45.1 42 10.8 63.1 50.2 46 88.5zm-86.3-30c-12.9-5.4-30 .3-38 12.9-8.3 12.9-4.3 28 8.6 34 13.1 6 30.8.3 39.1-12.9 8-13.1 3.7-28.3-9.7-34zm32.6-13.4c-5.1-1.7-11.4.6-14.3 5.4-2.9 5.1-1.4 10.6 3.7 12.9 5.1 2 11.7-.3 14.6-5.4 2.8-5.2 1.1-10.9-4-12.9z"/></svg></a>
                </div>
            

            
                <div class="share-item douban">
                    
                    <a href="https://www.douban.com/share/service?href=https://liudyboy.github.io/posts/hdf5-note/&amp;name=HDF5%20Note&amp;text=This%20Note%20is%20about%20HDF5." title="分享到「豆瓣」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon douban-icon"><path d="M.643.92v2.412h22.714V.92H.643zm1.974 4.926v9.42h18.764v-9.42H2.617zm2.72 2.408H18.69v4.605H5.338V8.254zm1.657 7.412l-2.512.938c1.037 1.461 1.87 2.825 2.512 4.091H0v2.385h24v-2.385h-6.678c.818-1.176 1.589-2.543 2.303-4.091l-2.73-.938a29.952 29.952 0 01-2.479 5.03h-4.75c-.786-1.962-1.677-3.641-2.672-5.03Z"/></svg></a>
                </div>
            

            
                <div class="share-item qq">
                    
                    <a href="https://connect.qq.com/widget/shareqq/index.html?url=https://liudyboy.github.io/posts/hdf5-note/&amp;title=HDF5%20Note&amp;summary=This%20Note%20is%20about%20HDF5.&amp;pics=https://liudyboy.github.io/imgs/typesss.png&amp;site=liudy" title="分享到「QQ」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qq-icon"><path d="M433.754 420.445c-11.526 1.393-44.86-52.741-44.86-52.741 0 31.345-16.136 72.247-51.051 101.786 16.842 5.192 54.843 19.167 45.803 34.421-7.316 12.343-125.51 7.881-159.632 4.037-34.122 3.844-152.316 8.306-159.632-4.037-9.045-15.25 28.918-29.214 45.783-34.415-34.92-29.539-51.059-70.445-51.059-101.792 0 0-33.334 54.134-44.859 52.741-5.37-.65-12.424-29.644 9.347-99.704 10.261-33.024 21.995-60.478 40.144-105.779C60.683 98.063 108.982.006 224 0c113.737.006 163.156 96.133 160.264 214.963 18.118 45.223 29.912 72.85 40.144 105.778 21.768 70.06 14.716 99.053 9.346 99.704z"/></svg></a>
                </div>
            

            
                <div class="share-item qzone">
                    
                    <a href="https://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=https://liudyboy.github.io/posts/hdf5-note/&amp;title=HDF5%20Note&amp;summary=This%20Note%20is%20about%20HDF5.&amp;pics=https://liudyboy.github.io/imgs/typesss.png&amp;site=liudy" title="分享到「QQ 空间」" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon qzone-icon"><path d="M23.985 9.202c-.032-.099-.127-.223-.334-.258-.207-.036-7.351-1.406-7.351-1.406s-.105-.022-.198-.07c-.092-.047-.127-.167-.127-.167S12.447.956 12.349.77C12.25.583 12.104.532 12 .532c-.104 0-.251.051-.349.238-.098.186-3.626 6.531-3.626 6.531s-.035.12-.128.167c-.092.047-.197.07-.197.07S.556 8.908.348 8.943c-.208.036-.302.16-.333.258a.477.477 0 0 0 .125.449l5.362 5.49s.072.08.119.172c.016.104.005.21.005.21s-1.189 7.242-1.22 7.45.075.369.159.43c.083.062.233.106.421.013.189-.093 6.812-3.261 6.812-3.261s.098-.044.201-.061c.103-.017.201.061.201.061s6.623 3.168 6.812 3.261c.188.094.338.049.421-.013a.463.463 0 0 0 .159-.43c-.021-.14-.93-5.677-.93-5.677.876-.54 1.425-1.039 1.849-1.747-2.594.969-6.006 1.717-9.415 1.866-.915.041-2.41.097-3.473-.015-.678-.071-1.17-.144-1.243-.438-.053-.215.054-.46.545-.831a2640.5 2640.5 0 0 1 2.861-2.155c1.285-.968 3.559-2.47 3.559-2.731 0-.285-2.144-.781-4.037-.781-1.945 0-2.275.132-2.811.168-.488.034-.769.005-.804-.138-.06-.248.183-.389.588-.568.709-.314 1.86-.594 1.984-.626.194-.052 3.082-.805 5.618-.535 1.318.14 3.244.668 3.244 1.276 0 .342-1.721 1.494-3.225 2.597-1.149.843-2.217 1.561-2.217 1.688 0 .342 3.533 1.241 6.689 1.01l.003-.022c.048-.092.119-.172.119-.172l5.362-5.49a.477.477 0 0 0 .127-.449z"/></svg></a>
                </div>
            

            
                <div class="share-item qrcode">
                    <div class="qrcode-container" title="通过「二维码」"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon qrcode-icon"><path d="M0 224h192V32H0v192zM64 96h64v64H64V96zm192-64v192h192V32H256zm128 128h-64V96h64v64zM0 480h192V288H0v192zm64-128h64v64H64v-64zm352-64h32v128h-96v-32h-32v96h-64V288h96v32h64v-32zm0 160h32v32h-32v-32zm-64 0h32v32h-32v-32z"/></svg><div id="qrcode-img"></div>
                    </div>
                    <script src="https://cdn.jsdelivr.net/npm/qrcode-generator@1.4.4/qrcode.min.js"></script>

<script>
    var typeNumber = 0;
    var errorCorrectionLevel = 'L';
    var qr = qrcode(typeNumber, errorCorrectionLevel);
    qr.addData('https:\/\/liudyboy.github.io\/posts\/hdf5-note\/');
    qr.make();
    document.getElementById('qrcode-img').innerHTML = qr.createImgTag();
</script>

                </div>
            

        </div>

    </div>




        
    
    
        <div class="related-posts">
            <h2 class="related-title">相关文章：<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon related-icon"><path d="M256 8C119 8 8 119 8 256s111 248 248 248 248-111 248-248S393 8 256 8zm144 276c0 6.6-5.4 12-12 12h-92v92c0 6.6-5.4 12-12 12h-56c-6.6 0-12-5.4-12-12v-92h-92c-6.6 0-12-5.4-12-12v-56c0-6.6 5.4-12 12-12h92v-92c0-6.6 5.4-12 12-12h56c6.6 0 12 5.4 12 12v92h92c6.6 0 12 5.4 12 12v56z"/></svg></h2>
            <ul class="related-list">
                
                    <li class="related-item">
                        <a href="/posts/protocol-buffers/" class="related-link">Protocol Buffers</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/caffe-%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0/" class="related-link">Caffe 源码笔记</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/protocl-buffers/" class="related-link">Protocol  Buffers笔记</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/cmake-notes/" class="related-link">Cmake Notes</a>
                    </li>
                
                    <li class="related-item">
                        <a href="/posts/my-useful-code-segment/" class="related-link">My Useful Code Segment</a>
                    </li>
                
            </ul>
        </div>
    



        
    
        <div class="post-tags">
            
                
                
                
                
                    
                    <a href="/tags/hdf5/" rel="tag" class="post-tags-link"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon tag-icon"><path d="M0 252.118V48C0 21.49 21.49 0 48 0h204.118a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882L293.823 497.941c-18.745 18.745-49.137 18.745-67.882 0L14.059 286.059A48 48 0 0 1 0 252.118zM112 64c-26.51 0-48 21.49-48 48s21.49 48 48 48 48-21.49 48-48-21.49-48-48-48z"/></svg>hdf5</a>
                
            
        </div>
    



        


        


        
    
        
        
    
    
    
    
        <ul class="post-nav">
            
                <li class="post-nav-prev">
                    <a href="/posts/git-notes/" rel="prev">&lt; Git Notes</a>
                </li>
            
            
                <li class="post-nav-next">
                    <a href="/posts/ensemble-methods/" rel="next">Ensemble Methods &gt;</a>
                </li>
            
        </ul>
    



        


    </div>
</main>


            
    <div id="back-to-top" class="back-to-top">
        <a href="#"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" class="icon arrow-up"><path d="M34.9 289.5l-22.2-22.2c-9.4-9.4-9.4-24.6 0-33.9L207 39c9.4-9.4 24.6-9.4 33.9 0l194.3 194.3c9.4 9.4 9.4 24.6 0 33.9L413 289.4c-9.5 9.5-25 9.3-34.3-.4L264 168.6V456c0 13.3-10.7 24-24 24h-32c-13.3 0-24-10.7-24-24V168.6L69.2 289.1c-9.3 9.8-24.8 10-34.3.4z"/></svg></a>
    </div>


            
    <footer id="footer" class="footer">
        <div class="footer-inner">
            <div class="site-info">©&nbsp;2020–2021&nbsp;<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon footer-icon"><path d="M462.3 62.6C407.5 15.9 326 24.3 275.7 76.2L256 96.5l-19.7-20.3C186.1 24.3 104.5 15.9 49.7 62.6c-62.8 53.6-66.1 149.8-9.9 207.9l193.5 199.8c12.5 12.9 32.8 12.9 45.3 0l193.5-199.8c56.3-58.1 53-154.3-9.8-207.9z"/></svg>&nbsp;liudy</div><div class="site-copyright"><a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a></div>

            
    
        <ul class="socials"><li class="socials-item">
                    <a href="mailto:liudy95@126.com" target="_blank" rel="external noopener" title="Email"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" class="icon social-icon"><path d="M464 64H48C21.49 64 0 85.49 0 112v288c0 26.51 21.49 48 48 48h416c26.51 0 48-21.49 48-48V112c0-26.51-21.49-48-48-48zm0 48v40.805c-22.422 18.259-58.168 46.651-134.587 106.49-16.841 13.247-50.201 45.072-73.413 44.701-23.208.375-56.579-31.459-73.413-44.701C106.18 199.465 70.425 171.067 48 152.805V112h416zM48 400V214.398c22.914 18.251 55.409 43.862 104.938 82.646 21.857 17.205 60.134 55.186 103.062 54.955 42.717.231 80.509-37.199 103.053-54.947 49.528-38.783 82.032-64.401 104.947-82.653V400H48z"/></svg></a>
                </li><li class="socials-item">
                    <a href="https://github.com/liudyboy" target="_blank" rel="external noopener" title="GitHub"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="icon social-icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a>
                </li></ul>
    



            
        </div>
    </footer>


        </div>
        
    <script src="https://cdn.jsdelivr.net/gh/cferdinandi/smooth-scroll/dist/smooth-scroll.polyfills.min.js"></script>

<script>
    var scroll = new SmoothScroll('a[href*="#"]', {
        speedAsDuration: true,
        header: '[data-scroll-header]'
    });
</script>






    <script>
    if (typeof MathJax === 'undefined') {
        window.MathJax = {
            loader: {
                load: ['[tex]/mhchem']
            },
            
            tex: {
                inlineMath: {'[+]': [['$', '$']]},
                tags: 'ams',
                packages: {'[+]': ['mhchem']}
            }
        };
        (function() {
            var script = document.createElement('script');
            script.src = 'https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-mml-chtml.js';
            script.defer = true;
            document.head.appendChild(script);
        })();
    } else {
        MathJax.texReset();
        MathJax.typeset();
    }
</script>








    <script src="https://cdn.jsdelivr.net/npm/medium-zoom@latest/dist/medium-zoom.min.js"></script>

<script>
    mediumZoom(document.querySelectorAll('div.post-body img'), {
        background: 'hsla(var(--color-bg-h), var(--color-bg-s), var(--color-bg-l), 0.95)'
    })
</script>




    <script src="https://cdn.jsdelivr.net/npm/instant.page@3.0.0/instantpage.min.js" type="module" defer></script>







    
        <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    




    </body>
</html>
